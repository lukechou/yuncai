require.config({paths:{jquery:"../lib/jquery",lodash:"../lib/lodash.compat.min",bootstrap:"../lib/bootstrap.min",app:"../common/app"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"}}}),require(["jquery","app","lodash","bootstrap"],function(t,a,e){"use strict";function o(a){return e.escape(t.trim(a))}function s(){var o=a.parseQueryString();for(var s in o)o.hasOwnProperty(s)&&(o[s]=e.escape(o[s]));t(".j-select-list [data-type="+o.type+"]").toggleClass(l+" "+i),t(".j-select-list [data-day="+o.day+"]").toggleClass(l+" "+i)}function r(t){for(var a="",e=t.length-1;e>=0;e--)t[e]="<span>"+t[e]+"</span>";return a=t.join("")}function n(t){for(var a="",e="",o="",s="",n="",d="",l=t.length-1;l>=0;l--){e=t[l],a+='<tr class="h-look j-look" data-no="'+c+'"><td  colspan="5"><div class="look-box"><table class="table m-mn-table m-table-border m-table-middle"><thead><tr><th>投注时间</th><th>赛事编号</th><th>对阵</th><th>赛果</th><th>投注内容</th><th>投注注数</th><th>投注金额（元）</th><th>状态</th></tr></thead><tbody><tr>',Number(e.bonus)>0&&(o='class="fc-3"'),s=e.sg.join(",");for(var i=e.tzNr.length-1;i>=0;i--)e.tzNr[i]=e.tzNr[i].join(",")===s?'<span class="fc-3">'+e.tzNr[i]+"</span>":"<span>"+e.tzNr[i]+"</span>";n=e.tzNr.join(""),d=e.isAutoBuy?'<i class="icon-font icon-f3" title="您设置自动投注已投注该模型">自</i>':"",a+="<td>"+d+e.tzTime+"</td>",a+='<td class="">'+r(e.ssbh)+"</td>",a+="<td>"+r(e.dz)+"</td>",a+='<td class="fc-3">'+s+"</td>",a+="<td>"+n+"</td>",a+="<td>"+r(e.tzZs)+"</td>",a+="<td>"+r(e.tzJe)+"</td>",a+="<td "+o+">"+e.status+"</td>",a+="</tr></tbody></table></div></td></tr>"}return a}function d(e,o){t.ajax({url:"/lottery/trade/view-detail",type:"get",dataType:"json",data:{order_no:e}}).done(function(t){if(1e5==t.retCode){var e=t.retData,s=n(e);o.after(s)}else a.handRetCode(t.retCode,t.retMsg)}).fail(function(){a.onServiceFail()})}var l="icon-y2",i="icon-y";s(),t(".j-select-list").on("click",".icon",function(a){t(this).parents(".j-select-list").find(".icon").removeClass(l).addClass(i),t(this).toggleClass(l+" "+i);var e=o(t(".j-select-day ."+l).attr("data-day")),s=o(t(".j-select-type ."+l).attr("data-type")),r=o(t("#j-model-id").val()),n="/lottery/model/history-data?day="+e+"&type="+s+"&model_id="+r;window.location.href=n});var c=0;t(".j-show-data").on("click",function(e){e.preventDefault();var o=t(this),s=o.parents(".j-stretch-t"),r=s.find(".j-order_no").val(),n=s.attr("data-index");c++,a.checkUserLoginStatus()?s.hasClass("on")?(t(".j-look[data-no="+n+"]").remove(),o.html("查看"),s.removeClass("on").attr("data-index","")):(s.addClass("on").attr("data-index",c),o.html("收起"),d(r,s)):a.showLoginBox()})});