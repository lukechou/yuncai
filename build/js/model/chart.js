define(["jquery","app","highcharts"],function(e,r){"use strict";var o=function(){function r(e){return this instanceof r?void 0:new r(e)}return r.prototype={width:945},r.prototype.init=function(e){for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])},r.prototype.createChart=function(){var r=this;r.config={chart:{renderTo:r.chartEl,width:r.width,zoomType:"x"},navigator:{enabled:!1,height:16,xAxis:{labels:{formatter:function(){return r.labelObj[this.value]}}}},tooltip:{crosshairs:[!0,!0],formatter:function(){var e="<b>期　　号：</b>"+r.labelObj[this.x]+" ["+r.resultObj[this.x]+"]";return e+='<br/><b>趋势指数：</b><span style="color:#ff0033;">'+Number(r.qszsObj[this.x]).toFixed(2)+"</span> "+r.nameRange["趋势指数"],e+='<br/><b>命中指数：</b><span style="color:yellow;">'+Number(r.mzzsObj[this.x]).toFixed(2)+"</span> "+r.nameRange["命中指数"]}},xAxis:{tickmarkPlacement:"on",dateTimeLabelFormats:{second:"%Y-%m-%d<br/>%H:%M:%S",minute:"%Y-%m-%d<br/>%H:%M",hour:"%Y-%m-%d<br/>%H:%M",day:"%Y<br/>%m-%d",week:"%Y<br/>%m-%d",month:"%Y-%m",year:"%Y"},labels:{formatter:function(){return r.labelObj[this.value]}},plotLines:r.xLine},yAxis:{plotLines:[{value:r.avg,width:.7,color:"yellow",dashStyle:"solid",zIndex:2,label:{}}],labels:{align:"right",y:5,x:-5},showLastLabel:!0,tickPositions:[(Number(r.yMin)-.05).toFixed(2),(Number(r.yMin)+(r.yMax-r.yMin)/3).toFixed(2),(Number(r.yMin)+(r.yMax-r.yMin)/3*2).toFixed(2),(Number(r.yMax)+.05).toFixed(2)]},series:[{name:"趋势指数",data:r.arr,shadow:!1,tooltip:{valueDecimals:2}},{name:"命中指数",data:r.hiArr,shadow:!1,tooltip:{valueDecimals:2}}]},r.config.plotOptions={line:{lineWidth:1},series:{states:{hover:{enabled:!0,lineWidth:1}},turboThreshold:2e3},zIndex:1},r.config.credits={enabled:!1},r.config.rangeSelector={selected:3,inputEnabled:!1,labelStyle:{visibility:"hidden",fontSize:0},buttons:[{type:"second",count:90,text:"90"},{type:"second",count:180,text:"180"},{type:"second",count:360,text:"360"},{type:"all",text:"All"}]},r.config.title={align:"right",margin:-28,text:"平均值博（"+parseFloat(r.avg).toFixed(2)+"）",style:{fontSize:"12px",color:"#f0f009"}},Highcharts.theme={colors:["#FF0000","#f0f009"],chart:{backgroundColor:"#041226",style:{fontFamily:"'Unica One', sans-serif"},plotBorderColor:"#606063"},title:{style:{color:"#E0E0E3",textTransform:"uppercase",fontSize:"20px"}},subtitle:{style:{color:"#E0E0E3",textTransform:"uppercase"}},xAxis:{gridLineColor:"#707073",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#A0A0A3"}}},yAxis:{gridLineColor:"#707073",align:"left",labels:{style:{color:"#E0E0E3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",tickWidth:1,title:{style:{color:"#f22"}}},legend:{itemStyle:{color:"#ccc"},itemHoverStyle:{color:"#fff"},itemHiddenStyle:{color:"#333"}},labels:{style:{color:"#707073"}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.50)",borderWidth:0,style:{color:"#fff"}},plotOptions:{series:{dataLabels:{color:"#B0B0B3"},marker:{lineColor:"#333"}},boxplot:{fillColor:"#505053"},candlestick:{lineColor:"#fff"},errorbar:{color:"#fff"}},toolbar:{itemStyle:{color:"#ccc"}},navigation:{buttonOptions:{symbolStroke:"#DDDDDD",theme:{fill:"#505053"}}},rangeSelector:{buttonTheme:{fill:"#adadad",stroke:"#000",style:{color:"#3d3d3d"},states:{hover:{fill:"#f5f5f5",stroke:"#000",style:{color:"#3d3d3d"}},select:{fill:"#f13c38",stroke:"#000",style:{color:"#fff"}}}},inputBoxBorderColor:"#505053",inputStyle:{backgroundColor:"#333",color:"silver"},labelStyle:{color:"silver"}},navigator:{handles:{backgroundColor:"#666",borderColor:"#AAA"},outlineColor:"#CCC",maskFill:"rgba(255,255,255,0.1)",series:{color:"#7798BF",lineColor:"#A6C7ED"},xAxis:{gridLineColor:"#505053"}},scrollbar:{barBackgroundColor:"#0354a2",barBorderColor:"#04285a",buttonArrowColor:"#CCC",buttonBackgroundColor:"#0355a5",buttonBorderColor:"#0355a5",rifleColor:"#FFF",trackBackgroundColor:"#01183d",trackBorderColor:"#01183d"},legendBackgroundColor:"rgba(0, 0, 0, 0.5)",background2:"#505053",dataLabelsColor:"#B0B0B3",textColor:"#C0C0C0",contrastTextColor:"#F0F0F3",maskColor:"rgba(255,255,255,0.3)"};Highcharts.setOptions(Highcharts.theme);r.chartEl.highcharts("StockChart",r.config),e("#j-chart-loder").remove(),r.chartEl.fadeIn()},r.prototype.getChartData=function(r){var o=this,t={model_id:r,t:e.now()};e.ajax({url:"/lottery/trade/fetch-icon-data",type:"GET",dataType:"json",data:t}).done(function(e){var r=e.retData,t=r.wrtrend,l=r.trend,a=r.hi,i=r.hit,n=(r.mintrend,r.maxtrend,r.minHI,r.maxh),s=r.minh,c=r.maxw,d=r.minw,b=(r.min,r.max,{0:'<span style="color:#cccccc">未中</span>',1:'<span style="color:yellow">命中</span>',2:'<span style="color:#ff0033">取消</span>'}),m={0:"#000000",1:"#0066cc",2:"#ff0033"},h={0:"#000000",1:"yellow",2:"#ff0033"},f={0:"0",1:"3",2:"3"},u={0:null,1:"circle",2:"circle"},y=12911616e5;o.arr=[],o.avg=r.avg,o.hiArr=[],o.yMin=r.miny,o.yMax=r.maxy,o.nameRange={"趋势指数":"(历史范围："+d+" - "+c+")","命中指数":"(历史范围："+Number(100*s).toFixed(2)+" - "+Number(100*n).toFixed(2)+")"},o.xLine=[],o.qszsObj={},o.mzzsObj={},o.labelObj={},o.resultObj={};for(var x in l){var p={},C={},g=i[x];p.x=y+=1e3,p.y=Number(l[x]),0==g?p.marker=null:(p.marker={},p.marker.enabled=!0,p.marker.fillColor=m[g],p.marker.radius=f[g],p.marker.symbol=u[g],p.marker.states={},p.marker.states.hover={},p.marker.states.hover.fillColor=m[g]),o.arr.push(p),C.x=y,C.y=Number(a[x]),0==g?C.marker=null:(C.marker={},C.marker.enabled=!0,C.marker.fillColor=h[g],C.marker.radius=f[g],C.marker.symbol=u[g],C.marker.states={},C.marker.states.hover={},C.marker.states.hover.fillColor=h[g]),o.hiArr.push(C);var k={};k.value=p.x,k.width=.7,k.color=m[g],k.dashStyle="solid",k.zIndex=1,o.xLine.push(k),o.labelObj[y+""]=x.replace(/\-/g,"").substring(2),o.resultObj[y+""]=b[g],o.qszsObj[y+""]=t[x],o.mzzsObj[y+""]=100*a[x]}o.createChart()}).fail(function(){})},r}(),t=new o;return t});