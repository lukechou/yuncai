require.config({paths:{jquery:"../lib/jquery",lodash:"../lib/lodash.compat.min",bootstrap:"../lib/bootstrap.min",store:"../lib/store.min",app:"../common/app"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"}}}),require(["jquery","lodash","store","app","bootstrap"],function(t,a,e,s){"use strict";function n(t){var a=t?t:1;return isNaN(t)||1>t?t=1:(t=Math.ceil(t),t>9999&&(t=9999)),a}function i(){t("#j-award-more b").html("收起"),t("#j-todaynum-table").removeClass("hide")}function r(){t("#j-award-more b").html("展开"),t("#j-todaynum-table").addClass("hide")}function o(){var t=10;l(),u(),h(),c(),z.statu=1,setInterval(function(){l(),u(),h()},1e3*t)}function l(){var a="/lottery/award/kuaipin/"+z.lotyName,e=t("#j-todaynum-table tbody"),s=e.attr("data-qihao");s&&s===z.qihao||t.ajax({url:a,type:"GET",dataType:"json",data:{t:"ajx"}}).done(function(a){for(var s=z.qihao.slice(0,z.qihao.length-2),n=(~~t("#j-maxqishu").val(),84),i=21,r=[],o="",l=null,u="",c="",h=0;i>h;h++)r.push([]);for(var h=1;n>=h;h++)l=null,o=10>h?"0"+h:h,a[s+o]?(l=a[s+o],l.index=o):l={index:o},r[h%i]?r[h%i].push(l):(r[h%i]=[],r[h%i].push(l));r[r.length]=r[0];for(var h=1,p=r.length;p>h;h++){u+="<tr>";for(var o=0;o<r[h].length;o++)c=r[h][o],u+='<td class="period">'+c.index+"</td>",u+=c.code_str?'<td class="awardTd">'+c.code_str+"</td>":"<td>- -</td>",u+=c.hz_val?"<td>"+c.hz_val+"</td>":"<td></td>",u+=c.shape?"<td>"+c.shape+"</td>":"<td></td>";u+="</tr>"}e.html(u),e.attr("data-qihao",z.qihao)})}function u(){t.ajax({url:"/lottery/issue/get-last-award-info",type:"GET",dataType:"json",data:{lotteryId:z.lotyId}}).done(function(a){if(1e5===a.retCode){for(var e="",s=0;s<a.retData.length&&!(s>5);s++)e+="<tr>",e+="<td>"+a.retData[s].username+"</td>",e+="<td>"+a.retData[s].bonus_before_tax+"</td>",e+="</tr>";t("#j-new-bonus-list").html(""==e?'<tr><td colspan="2">暂无相关中奖纪录</td></tr>':e)}else t("#j-new-bonus-list").html('<tr><td colspan="2">系统繁忙</td></tr>')})}function c(){var a=t("#issue_size").val();t.ajax({url:"/lottery/issue/get-cur-issue",type:"GET",dataType:"json",data:{lottery_id:z.lotyId}}).done(function(e){var n=e.retData[0],i="",r="",o=~~t("#j-maxqishu").val()||100,l="";if(1e5===e.retCode){if(r=0===parseInt(n.sell_status,10))return s.showStopSellModal(z.lotyCnName),t("#buy-submit").html("暂停销售").removeClass("btn-red").addClass("btn-stop").attr("id",""),void t("#j-less-seconds").html('<i class="icon icon-k302">--</i><i class="icon icon-k302">--</i>');i=Math.floor(n.company_sell_etime-n.sys_time),z.qihao=n.issue_num,z.qihaoId=n.id,l=~~z.qihao.slice(z.qihao.length-2)-1,t("#j-sell-qi").html(l),t("#j-less-qi").html(o-l),0>i?(t("#j-second-hd").addClass("out"),t("#j-less-seconds").html("<h6>等待开售中..</h6>"),z.waitSell=!0,h(),v(10)):(f(i),z.waitSell=!1,t("#j-second-hd").removeClass("out"),t("#j-dq-qihao").html(z.qihao),t(".br-details thead .br-zhui-c")[0].checked=!0,k(a))}}).fail(function(){v(10)})}function h(){t.ajax({url:"/lottery/issue/kuaipin/last-issue-n",type:"GET",dataType:"json",data:{loty_name:z.lotyName,issue_num:10}}).done(function(a){var e=a.retData,s="",n="",i="",r="等待开奖",o="",l=e[0],u=0;if(1e5==a.retCode){for(var c=0,h=e.length;h>c;c++)i=""==e[c].kjhm?"等待开奖":'<span class="fc-3">'+e[c].kjhm+"</span>",s+="<tr><td>"+e[c].no+"期</td><td>"+i+"</td></tr>";if(t("#j-last-issue-n").html(s),""!=l.kjhm){r="",o=l.kjhm.split(" ");for(var c=0,h=o.length;h>c;c++)r+='<span class="bg-3">'+o[c]+"</span>";n="<p>"+z.lotyCnName+' 第<span class="fc-3 mlr5">'+l.no+'</span>期<span>开奖</span></p><p class="sub-content-num">'+r+"</p>"}else n="<p>"+z.lotyCnName+' 第<span class="fc-3 mlr5">'+l.no+'</span>期<span>开奖</span></p><p class="sub-content-num">'+r+"</p>";t("#j-sub-content").html(n),l.kj_time<=l.server_time?(z.currentKjStatus=o?1:2,z.waitSell&&(z.currentKjStatus=4)):(z.currentKjStatus=3,u=l.kj_time-l.server_time),(z.kjStatus!==z.currentKjStatus||4===z.currentKjStatus)&&(d({nums:o,no:l.no,lessTime:u,item:e}),z.kjStatus=z.currentKjStatus)}})}function p(t){var a=0;if(t&&t.length>0)for(var e=0;e<t.length;e++)a+=~~t[e];else a=null;return a}function d(e){var s=0,n={},i="",r="",o="",l=null;if(e){if(z.currentKjStatus||(z.currentKjStatus=1),s=p(e.nums),i=C(e.nums),n={qihao:e.no,nums:e.nums,xt:i,hz:s},1===z.currentKjStatus)return r=a.template('<p class="third-hd"><b>第<span class="mlr5"><%= qihao%></span>开奖号码：<% _.forEach(nums, function(num) { %><span class="fc-3 mlr5"><%- num %></span><% }); %></b>形态：<%= xt%></p><div class="third-box clearfix"><ul class="pull-left third-hisnum"><% _.forEach(nums, function(num) { %><li ><%- num %></li><% }); %></ul><div class="pull-right third-histext"><h5><%= hz%></h5><span>和值</span></div></div><a href="javascript:;" class="third-more">更多开奖号码</a>'),void t("#j-kj-box").html(r(n));if(2===z.currentKjStatus){var u='<div class="num-group"><span class="num-1"></span><span class="num-2"></span><span class="num-3"></span><span class="num-4"></span><span class="num-5"></span><span class="num-6"></span></div>';return r=a.template('<p class="third-hd"><b>第<span class="mlr5"><%= qihao%></span>开奖号码：</b><% _.forEach(nums, function(num) { %><span class="fc-3 mlr5"><%- num %></span><% }); %></p><div class="third-box clearfix"><ul class="pull-left third-hisnum" id="j-kjing-num"><li>'+u+"</li><li>"+u+"</li><li>"+u+'</li></ul><div class="pull-right third-histext"><span class="third-kjing">开奖中</span></div></div><a href="javascript:;" class="third-more">更多开奖号码</a>'),t("#j-kj-box").html(r(n)),void _()}if(3===z.currentKjStatus)return l=e.item[1],e.nums=l.kjhm,s=p(e.nums),i=C(e.nums),n.hz=s,n.xt=i,n.nums=e.nums,o=e.nums?'和值:</span> <b class="fc-3">'+n.hz+"</b>形态: "+n.xt:'<b class="fc-3">等待开奖</b>',n.time=y(e.lessTime).join(":"),r=a.template('<p class="third-hd fs-12">第<span class="mlr5">'+l.no+'</span>期开奖号码：<% _.forEach(nums, function(num) { %><i class="mlr2 icon icon-k3num<%= num %>"></i><% }); %>'+o+'</p><div class="third-timer"><h5>第<b class="fc-3 mlr5"><%= qihao%></b>期等待开奖：</h5><p class="thired-timer-sp"><i class="icon icon-k303"></i><span id="j-wait-time"><%= time%></span></p><div class="progress"><div class="progress-box"><div class="progress-bar progress-bar-danger" id="progress-bar"><i class="before"></i><i class="after"></i><i class="mid mid-1"></i><i class="mid mid-2"></i><i class="mid mid-3"></i></div></div></div></div><a href="javascript:;" class="third-more">更多开奖号码</a>'),z.waitEndTime=e.lessTime,z.waitStartTime=e.lessTime,m(),void t("#j-kj-box").html(r(n));if(4===z.currentKjStatus){l=e.item[1],e.nums=l.kjhm,s=p(e.nums),i=C(e.nums),n.hz=s,n.xt=i,n.nums=e.nums,o=e.nums?'和值:</span> <b class="fc-3">'+n.hz+"</b>形态: "+n.xt:'<b class="fc-3">等待开奖</b>';var c="",h=e.item[0].kjhm.split(" ");if(e.item[0].kjhm)for(var d=0;d<h.length;d++)c+='<i class="mlr2 icon icon-k3num'+h[d]+'"></i>';else c="等待开奖中..";return r=a.template('<p class="third-hd fs-12">第<span class="mlr5">'+l.no+'</span>期开奖号码：<% _.forEach(nums, function(num) { %><i class="mlr2 icon icon-k3num<%= num %>"></i><% }); %>'+o+'</p><div class="third-box clearfix"><p class="wait-p1">第<span class="fc-3 mlr5"><%= qihao%></span>期</p><p class="wait-p2 fs-yh">'+c+'</p></div><a href="javascript:;" class="third-more">更多开奖号码</a>'),void t("#j-kj-box").html(r(n))}}}function m(){z.runWaitTimer=setInterval(function(){z.waitEndTime--,z.waitEndTime>0?(t("#j-wait-time").html(y(z.waitEndTime).join(":")),t(".progress-bar").width(z.waitEndTime/z.waitStartTime*100+"%")):(clearInterval(z.runWaitTimer),h())},1e3)}function y(t){var a=[],e=~~(t/60/60),s=~~(t/60%60),n=t%60;return 10>e&&(e=0>=e?null:"0"+e),10>s&&(s="0"+s),10>n&&(n="0"+n),e&&a.push(e),a.push(s,n),a}function b(a){var e=y(a),s="";3===e.length?(s='<i class="icon icon-k302">'+e[0]+'</i><i class="icon icon-k302">'+e[1]+'</i></i><i class="icon icon-k302">'+e[2]+"</i>",t("#j-less-seconds").addClass("active").html(s)):(s='<i class="icon icon-k302">'+e[0]+'</i><i class="icon icon-k302">'+e[1]+"</i>",t("#j-less-seconds").removeClass("active").html(s))}function f(a){a=0>a?0:a,b(a);var e=~~((new Date).getTime()/1e3),n=t("#j-dq-qihao").html();z.nextTimer=e+a,z.runTimer=setInterval(function(){var t=~~((new Date).getTime()/1e3),a=z.nextTimer-t;a>0?b(a):(b(0),z.alertQihao!==n&&(s.showTips("您好，第 "+n+"期已截止，投注时请确认您选择的期号。"),z.alertQihao=n),h(),z.runTimer&&clearInterval(z.runTimer),c())},1e3)}function v(t){var e=null;e=t&&a.isNumber(t)&&t>0?1e3*t:1e4;setTimeout(function(){c()},e)}function j(t){if(""===t)return t;var a=parseInt(t,10);return isNaN(a)?a=1:(a=a>=1?a:1,a=a),a=a>9999?9999:a}function T(t,a){var e=parseInt(t,10);return 1==a?e++:e--,e=e>=1?e:1,e=e>9999?9999:e}function g(a){var e=t("#project_mutiple");z.beishu=a,e.val(a),z.updateBottomUi()}function k(e){var s="";s='<tr><td colspan="5">系统繁忙， 请稍候再试</td></tr>',t(".br-details thead .br-zhui-bei").val(1),t.ajax({url:"/lottery/issue/get-issue-list?lottery_id="+z.lotyId+"&issue_size="+e,type:"GET",dataType:"json"}).done(function(e){var n=e.retData;if(1e5==e.retCode){a.isArray(n)&&n.length&&(s="");for(var i=0;i<n.length;i++){var r=i+1,o=z.getBuyArrTotalMoney();s+="<tr><td>"+r+'</td><td><input type="checkbox" class="br-zhui-c" data-qihaoid="'+n[i][0]+'"data-qi="'+n[i][1]+'" checked="">'+n[i][1]+'期</td><td><input type="text" class="br-input br-zhui-bei" value="1">倍</td><td><span class="j-money">'+o+'</span>元</td><td><span class="ml15">'+n[i][2]+"</span></td></tr>"}}t("#track_issue_list").html(s),z.updateTrackList()}).fail(function(){t("#track_issue_list").html(s),z.updateTrackList()})}function C(t){var a="",e=0;if(t&&t.length>0){for(var s=0;s<t.length;s++)e+=~~t[s];a+=e%2===0?'<i class="icon icon-tips k3-bg4 mlr2">双</i>':'<i class="icon icon-tips k3-bg3 mlr2">单</i>',a+=e>10?'<i class="icon icon-tips k3-bg1 mlr2">大</i>':'<i class="icon icon-tips k3-bg2 mlr2">小</i>'}else a=null;return a}function _(){setInterval(function(){t("#j-kjing-num .num-group").each(function(a,e){var s=t(this);s.animate({top:-69},100,function(){var t=s.find("span").first().clone();s.find("span").first().remove(),s.css("top",0).append(t)})})},100)}var q={};q.a=function(t){try{return 1==t||2==t?t:t*q.a(t-1)}catch(a){alert(a)}},q.getACTotalNum=function(t,a,e){if(t==a)return 1;if(a>t)return 0;a=2*a>t?t-a:a;var s=q.a(t)/q.a(t-a);return"A"===e?s:"C"===e?s/q.a(a):0};var z=function(){var e={lotyCnName:a.escape(t("#j-lotyCnName").val()),qihaoId:a.escape(t("#qihaoId").val()),qihao:a.escape(t("#qihao").val()),lotyName:t("#j-lotyName").val(),lotyId:t("#j-track-lotyid").val(),playType:"b0",chooseMoney:0,chooseZhushu:0,buyArr:[],playName:{b0:"和值",b1:"三同号通选",b2:"三同号单选",b3:"三不同号",b4:"三连号通选",b5:"二同号复选",b6:"二同号单选",b7:"二不同号"},buyCodesType:{b0:"HZ",b1:"3A",b2:"3B",b3:"3C",b4:"3D",b5:"2A",b6:"2B",b7:"2C"},beishu:1,trackData:[],buyType:1,runTimer:null,kjStatus:0,currentKjStatus:null,runWaitTimer:null,waitEndTime:0,waitStartTime:0,alertQihao:null,waitSell:!1};return e}();z.reset=function(){var t=this;t.cleanNumBtn(),t.cleanBuyList(),t.buyArr=[],t.chooseMoney=0,t.chooseZhushu=0,t.beishu=1},z.updateBottomUi=function(){var a=this,e=0;e=a.getBuyArrTotalMoney(),t("#buy_zhushu").html(e/2),t("#project_price").html(a.beishu*e),e>0?t("#buy-submit").removeAttr("disabled"):t("#buy-submit").attr("disabled",!0),a.updateTrackList()},z.createOneNote=function(e){var s=this;s.saveNumsObj(e);var n={title:s.playName[e.playType],nums:e.nums,money:e.money,zid:e.zid,num:""};switch(s.playType){case"b0":for(var i=0;i<n.nums.length;i++)n.num+="<span>"+n.nums[i]+"</span>";break;case"b1":n.num="<span>三同号通选</span>";break;case"b2":for(var i=0;i<n.nums.length;i++)n.num+="<span>"+n.nums[i]+"</span>";break;case"b3":n.num="<span>"+e.nums+"</span>";break;case"b4":n.num="<span>三连号通选</span>";break;case"b5":n.num="<span>"+e.nums+"</span>";break;case"b6":n.num="<span>"+e.nums+"</span>";break;case"b7":for(var i=0;i<n.nums.length;i++)n.num+="<span>"+n.nums[i]+"</span>"}var r=a.template('<div data-zid="<%= zid%>" class="br-zhu-item clearfix"><b>[<%= title%>]</b><div class="list"><%= num%></div><div class="pull-right"><b><i class="money"><%= money%></i>元</b><a href="javascript:;" class="br-zhu-del">删除</a></div></div>'),o=r(n);t("#code_list").append(o),s.updateBottomUi()},z.createHzAsBtn=function(){t(".j-as-btn.active").removeClass("active")},z.addManyItem=function(t){var e=this;if(a.isNumber(t)&&t>0){if(e.buyArr.length+t>100)return void s.showTips("您的投注号码多于100行，请返回重新选择");for(var n=0;t>n;n++)e.createOneItem()}},z.createOneItem=function(){var t=this,e=[],s=null,n=[],i={b0:[4,5,6,7,8,9,10,11,12,13,14,15,16,17],b1:["3A"],b2:["111","222","333","444","555","666"],b3:["1","2","3","4","5","6"],b4:["3D"],b5:["11*","22*","33*","44*","55*","66*"],b6:["1","2","3","4","5","6"],b7:["1","2","3","4","5","6"]};switch(t.playType){case"b3":n=a.sample(i[t.playType],3).sort(function(t,a){return t-a});break;case"b6":n=a.sample(i[t.playType],2),n=n[0]+n[0]+"#"+n[1];break;case"b7":n=a.sample(i[t.playType],2).sort(function(t,a){return t-a});break;default:n=a.sample(i[t.playType],1)}a.isArray(n)?e=n:e.push(n),s={zid:a.uniqueId(),nums:e,money:2,playType:t.playType},t.createOneNote(s)},z.getObj=function(){var e=this,s=t("#j-area-"+e.playType+" .j-num-btn.active"),n=[],i={zid:a.uniqueId(),nums:null,money:null,playType:e.playType};if(s.each(function(a,e){n.push(t(this).attr("data-num"))}),"b6"===e.playType){var r={e:[],f:[]};t("#j-area-"+e.playType+" .j-num-btn.active").each(function(a,e){var s=t(this).attr("data-num");1===s.length&&r.e.push(s),2===s.length&&r.f.push(s)}),n=[r.f.join(",")+"#"+r.e.join(",")]}return i.nums=n,i.money=e.chooseMoney,i},z.getChooseToBuy=function(){var t=this,a=t.getObj();t.createOneNote(a),t.cleanNumBtn(),"b0"===t.playType&&t.createHzAsBtn()},z.saveNumsObj=function(t){var e=this;a.isArray(e.buyArr)||(e.buyArr=[]),e.buyArr.push({zid:t.zid,nums:t.nums,money:t.money,playType:t.playType})},z.cleanBuyList=function(){var a=this;a.buyArr=[],t("#code_list").html(""),a.updateBottomUi()},z.updateChooseToBuyBtn=function(){var a=this,e="active";a.chooseMoney>0?t("#choose_to_buy").addClass(e).removeAttr("disabled"):t("#choose_to_buy").removeClass(e)},z.setChooseParams=function(){var a=this,e=t("#j-area-"+a.playType+" .j-num-btn.active").length,s=null,n=null;switch(a.playType){case"b3":s=q.getACTotalNum(e,3,"C"),a.chooseZhushu=s,a.chooseMoney=2*s;break;case"b6":n={e:[],f:[]},t("#j-area-"+a.playType+" .j-num-btn.active").each(function(a,e){var s=t(this).attr("data-num");1===s.length&&n.e.push(s),2===s.length&&n.f.push(s)}),s=n.e.length*n.f.length,a.chooseZhushu=s,a.chooseMoney=2*s;break;case"b7":s=q.getACTotalNum(e,2,"C"),a.chooseZhushu=s,a.chooseMoney=2*s;break;default:a.chooseZhushu=e,a.chooseMoney=2*e}},z.updateMidTotal=function(){var a=this;a.setChooseParams(),t("#choose_zhushu").html(a.chooseZhushu),t("#choose_money").html(a.chooseMoney),a.updateChooseToBuyBtn()},z.cleanNumBtn=function(){var a=this;a.chooseMoney=0,a.chooseZhushu=0,t("#j-area-"+a.playType+" .j-num-btn").removeClass("active"),a.updateMidTotal()},z.updateHzBallList=function(e){var s=this,n=[[0,1,2,3,4,5,6],[1,3,5,7,9,11,13],[0,2,4,6,8,10,12],[7,8,9,10,11,12,13]],i=null,r=t("#j-area-"+s.playType+" .j-num-btn"),o="active";switch(e.length){case 1:i=n[e];break;case 2:i=a.intersection(n[e[0]],n[e[1]])}if(i){s.cleanNumBtn();for(var l=0;l<i.length;l++)r.eq(i[l]).addClass(o);s.updateMidTotal()}},z.removeBuyList=function(t){var e=this;a.remove(e.buyArr,function(a){return a.zid==t}),e.updateBottomUi()},z.togglePlayTab=function(){var t=this;t.cleanNumBtn(),t.cleanBuyList()},z.getBuyArrTotalMoney=function(){for(var t=this,a=0,e=0;e<t.buyArr.length;e++)a+=~~t.buyArr[e].money;return a},z.buySuccess=function(t,a,n){var i=this;1e5==t.retCode?(e.set("lotyName",i.lotyName),e.set("lotyCNName",i.lotyCnName),e.set("payMoney",n),e.set("projectNo",t.retData.projectNo),e.set("trackId",t.retData.trackId),window.location.href="/html/lottery/trade/success.html"):s.handRetCode(t.retCode,t.retMsg)},z.enoughMoneyCb=function(a,e,s){var n=this;t.ajax({url:a,type:"post",dataType:"json",data:e}).done(function(t){n.buySuccess(t,e,s)})},z.getCodes=function(){for(var t=this,a=[],e="",s=[],n=0;n<t.buyArr.length;n++)a.push(t.buyCodesType[t.playType]+"|"+t.buyArr[n].nums.join(",")),s=s.concat(t.buyArr[n].nums);if("b2"==t.playType){a=[];for(var n=0;n<s.length;n++)a.push(t.buyCodesType[t.playType]+"|"+s[n])}return e=a.join("$")},z.buyLoty=function(){var a=this,e="",n={},i=a.getBuyArrTotalMoney(),r=(a.playName[a.playType],""),o=0,l="buy-self",u=0;if(n.zhushu=i/2,n.beishu=a.beishu,n.unikey=t.now(),n.codes=a.getCodes(),r+='<div class="frbox"><img src="http://static3.yuncai.com/front_images/fail.png" alt="success" class="icon"><div class="text">',1==a.buyType)n.qihaoId=a.qihaoId,n.qihao=a.qihao,o=i*n.beishu,r+="<p>"+a.lotyCnName+" 第<span>"+n.qihao+"</span>期</p>",r+="<p>共<span>"+n.zhushu+"</span>注, 投注<span>"+n.beishu+"</span>倍</p>",r+='<p>本次需支付<span class="fc-3">'+o+".00</span>元</p></div>";else{if(2!=a.buyType)return;u=t("#is_end_zhongjiang")[0].checked?1:0,l="buy-track",n.zhuihaoqihao=[];for(var c=0,h=a.trackData.length;h>c;c++)n.zhuihaoqihao.push(a.trackData[c].tid+"|"+a.trackData[c].qi+"|"+a.trackData[c].bs);n.endminmoney=u,o=a.getTrackTotalMoney(a.getBuyArrTotalMoney()),r+="<p>追号<span>"+a.trackData.length+'</span>期</p><p>本次需支付<span class="fc-3">'+o+"</span>元</p></div>"}e="/lottery/kuaipin/"+l+"/"+a.lotyName+"/"+a.buyCodesType[a.playType];var p="";2===a.buyType?p+='<p>追号<span class="fc-3 mlr5">'+n.zhuihaoqihao.length+"</span>期</p>":(p+="<p>"+a.lotyCnName+' 第<span class="fc-3 mlr5">'+a.qihao+"</span>期</p>",p+='<p>共<span class="fc-3 mlr5">'+n.zhushu+'</span>注, 投注<span class="fc-3 mlr5">'+n.beishu+"</span>倍</p>"),p+='<p>本次需支付：<span class="fc-3 mlr5">'+o+".00</span>元",s.checkLogin(o,{enoughMoney:function(){s.showTips({text:r,title:"投注确认",type:2,onConfirm:function(){a.enoughMoneyCb(e,n,o)}})},lessMoneyTips:p})},z.onToggleBuyType=function(a){var e=this;e.buyType=a,e.beishu=1,t("#project_mutiple").val(1),e.updateBottomUi()},z.updateTrackList=function(){var a=this;a.trackData=[];var e=null,s=null,n=null,i=0,r=a.getBuyArrTotalMoney();t("#track_issue_list").find(".br-zhui-c").each(function(i,o){var l=t(this);e=l.attr("data-qihaoid"),s=~~l.parents("tr").find(".br-zhui-bei").val(),n=l.attr("data-qi"),o.checked&&a.trackData.push({tid:e,bs:s,qi:n}),l.parents("tr").find(".j-money").html(r*s)}),i=a.getTrackTotalMoney(r),t("#track_issue_num").html(a.trackData.length),t("#track_money").html(i)},z.getTrackTotalMoney=function(t){for(var a=this,e=0,s=0;s<a.trackData.length;s++)e+=t*a.trackData[s].bs;return e},t(".br-details").on("change","tbody .br-zhui-c",function(t){t.preventDefault(),z.updateTrackList()}),t(".br-details").on("change","thead .br-zhui-c",function(a){a.preventDefault(),t(this)[0].checked?t("#track_issue_list .br-zhui-c").each(function(a,e){t(this)[0].checked=!0}):t("#track_issue_list .br-zhui-c").removeAttr("checked"),z.updateTrackList()}),t(".br-details").on("change","thead .br-zhui-bei",function(a){var e=parseInt(t(this).val())||1;e=n(e),t(this).val(e),t(".br-details tbody .br-zhui-bei").val(e),z.updateTrackList()}),t(".br-details tbody").on("change",".br-zhui-bei",function(a){var e=parseInt(t(this).val())||1;e=n(e),t(this).val(e),z.updateTrackList()}),t("#buy-submit").on("click",function(a){return a.preventDefault(),t(".j-sub-agreed")[0].checked?void(2===z.buyType&&0===z.trackData.length?s.showTips("追号最少购买一期"):z.buyLoty()):void s.showTips("请先阅读并同意《委托投注规则》后才能继续")}),t("#issue_size").on("change",function(a){a.preventDefault();var e=~~t(this).val();k(e)}),t("#increase_mutiple").on("click",function(a){var e=t("#project_mutiple"),s=e.val(),n=T(s,1);g(n)}),t("#decrease_mutiple").on("click",function(a){var e=t("#project_mutiple"),s=e.val(),n=T(s,0);g(n)}),t("#project_mutiple").on("keyup change",function(a){var e=t(this),s=(e.attr("data-r"),j(e.val()));s=s||1,g(s)}),t("#j-box-left").on("click",".j-zhu-adds",function(a){a.preventDefault();var e=~~t(this).attr("data-zhu");z.addManyItem(e)}),t("#j-box-left").on("click",".br-zhu-del",function(a){a.preventDefault();var e=t(this).parents(".br-zhu-item"),s=Number(e.attr("data-zid"));z.removeBuyList(s),e.remove()}),t("#j-nav").on("click","li",function(a){a.preventDefault();var e=t(this),s=e.attr("data-playtype");t("#j-nav li").removeClass("active"),e.addClass("active"),t(".box-choose").removeClass("active"),t(".j-choose-"+s).addClass("active"),z.playType=s,z.togglePlayTab(),t(".j-as-btn").removeClass("active")}),t("#j-box-left").on("click",".j-num-btn",function(a){if(a.preventDefault(),t(this).toggleClass("active"),"b6"===z.playType){var e=t(this).attr("data-num"),s=null;s=t(1===e.length?"#j-area-"+z.playType+" .j-num-btn[data-num="+e+e+"]":"#j-area-"+z.playType+" .j-num-btn[data-num="+e.charAt(0)+"]"),s.hasClass("active")&&s.removeClass("active")}z.updateMidTotal()}),t("#choose_to_buy").on("click",function(a){return a.preventDefault(),z.buyArr.length>=100?void s.showTips("您的投注号码多于100行，请返回重新选择"):void(t(this).hasClass("active")&&z.getChooseToBuy())}),t("#clean_buy_code").on("click",function(t){t.preventDefault(),z.cleanBuyList()}),t("#j-box-left").on("click",".j-as-btn",function(a){a.preventDefault();var e=t(this),s=t(".j-as-btn"),n=Number(e.attr("data-xt")),i="",r="active",o=[];switch(n){case 0:i=3;break;case 1:i=2;break;case 2:i=1;break;case 3:i=0}e.hasClass(r)?e.removeClass(r):(e.addClass(r),s.eq(i).hasClass(r)&&s.eq(i).removeClass(r)),t(".j-as-btn."+r).each(function(a,e){o.push(~~t(this).attr("data-xt"))}),o.length?z.updateHzBallList(o):z.cleanNumBtn()}),t("#buy_type").on("click",".j-tog-tab",function(a){a.preventDefault();var e=t(this);t("#buy_type li .icon").removeClass("icon-y2"),e.find(".icon").addClass("icon-y2");var s=e.find("a"),n=~~s.attr("data-buytype"),i=s.attr("href");switch(t("#buy_type").siblings(".tab-content").find(".tab-pane").removeClass("active"),t(i).addClass("active"),z.onToggleBuyType(n),n){case 1:t("#track_desc").addClass("hide"),t("#buy_mutiple_span").show();break;case 2:t("#buy_mutiple_span").hide(),t("#track_desc").removeClass("hide"),k(10)}}),t("#j-touzhu-tips").on("click",function(a){t("#j-touzhu-tipstext").toggle(),t(this).find(".icon").toggleClass("icon-bup").toggleClass("icon-bdown")}),t("#j-kj-box").on("click",".third-more",function(a){a.preventDefault(),i();var e=t("#j-todaynum-table").offset().top;t("html, body").animate({scrollTop:e+"px"},300)}),t("#j-award-more").on("click",function(a){a.preventDefault(),t("#j-todaynum-table").hasClass("hide")?i():r()}),o()});