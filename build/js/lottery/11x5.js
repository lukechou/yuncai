require.config({paths:{jquery:"../lib/jquery",lodash:"../lib/lodash.compat.min",bootstrap:"../lib/bootstrap.min",store:"../lib/store.min",app:"../common/app",core:"../lib/core",Core11x5:"../lottery/11x5_core"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"}}}),require(["jquery","lodash","store","app","Core11x5","bootstrap","core"],function(a,e,t,s,i){"use strict";a(document).ready(function(){function o(){z.init(),M.init(),p(),n(),setInterval(function(){p(),C--%60===0&&n()},1e3)}function n(){a.ajax({url:"/lottery/issue/get-cur-issue?lottery_id="+lotyId,type:"GET",dataType:"json"}).done(function(e){1e5===e.retCode&&(C=Math.floor(e.retData[0].company_sell_etime-e.retData[0].sys_time),D=0===parseInt(e.retData[0].sell_status,0),D&&(s.showStopSellModal(z.lotyCNName),a("#buy-submit").html("暂停销售").removeClass("btn-red").addClass("btn-stop").attr("id","")),z.alertStopModal!==z.qihao&&0!==z.alertStopModal&&s.showTips("您好，第 "+z.alertStopModal+" 期已截止，投注时请确认您选择的期号。"),0>C&&z.alertStopModal!==z.qihao&&s.showTips("您好，第 "+z.qihao+" 期已截止，投注时请确认您选择的期号。"),z.alertStopModal=z.qihao,2==z.buyType&&z.qihao!==e.retData[0].issue_num&&(a(".br-details thead .br-zhui-c")[0].checked=!0,j(a("#issue_size").val())),z.qihao=e.retData[0].issue_num,z.qihaoId=e.retData[0].id)}),c(),r(),l()}function l(){a.ajax({url:"/lottery/issue/kuaipin/last-issue-n?loty_name="+z.lotyName+"&issue_num=10",type:"GET",dataType:"json"}).done(function(e){if(1e5==e.retCode){for(var t="",s=0,i=e.retData.length;i>s;s++){var o=""==e.retData[s].kjhm?"等待开奖":'<span class="fc-3">'+e.retData[s].kjhm+"</span>";t+='<tr><td class="right-qihao">'+e.retData[s].no+"</td><td>"+o+"</td></tr>"}var n="等待开奖";if(""!=e.retData[0].kjhm){n="";for(var l=e.retData[0].kjhm.split(" "),s=0,i=l.length;i>s;s++)n+='<span class="bg-3">'+l[s]+"</span>"}a("#j-new-num").html(n),a("#j-last-issue-no").html(e.retData[0].no),a("#j-last-issue-n").html(t)}})}function c(){a.ajax({url:"/lottery/issue/get-last-award-info?lotteryId="+lotyId,type:"GET",dataType:"json"}).done(function(e){if(1e5===e.retCode){for(var t="",s=0;s<e.retData.length&&!(s>5);s++)t+="<tr>",t+="<td>"+e.retData[s].username+"</td>",t+="<td>"+e.retData[s].bonus_before_tax+"</td>",t+="</tr>";a("#j-new-bonus-list").html(""==t?'<tr><td colspan="2">暂无相关中奖纪录</td></tr>':t)}else a("#j-new-bonus-list").html('<tr><td colspan="2">系统繁忙</td></tr>')}).fail(function(){console.log("error")})}function r(){a.ajax({url:"/statistics/issue/yilou?lottery_id="+lotyId+"&issue="+z.qihao,type:"GET",dataType:"json"}).done(function(t){if(1e5===t.retCode){var s=t.retData[1].split("|"),i=e.max(s,function(a){return parseInt(a)});a(".j-row-q1").find(".j-yilou").each(function(e,t){var o=i==s[e]?'<b style="color:red;">'+s[e]+"</b>":s[e];a(this).html(o)});var o=t.retData[2].split("|"),i=e.max(o,function(a){return parseInt(a)});a(".j-row-rx").each(function(e,t){a(this).find(".j-yilou").each(function(e,t){a(this).html(i==o[e]?'<b style="color:red;">'+o[e]+"</b>":o[e])})});var n=t.retData[9].split("|"),i=e.max(n,function(a){return parseInt(a)});a(".j-row-z2").find(".j-yilou").each(function(e,t){a(this).html(i==n[e]?'<b style="color:red;">'+n[e]+"</b>":n[e])});var l=t.retData[10].split("|"),i=e.max(l,function(a){return parseInt(a)});a(".j-row-z3").find(".j-yilou").each(function(e,t){a(this).html(i==l[e]?'<b style="color:red;">'+l[e]+"</b>":l[e])});var c=t.retData[11].split("$");a(".j-row-zx2").each(function(t,s){var i=c[t].split("|"),o=e.max(i,function(a){return parseInt(a)});a(this).find(".data-bit-"+t).find(".j-yilou").each(function(e,t){a(this).html(o==i[e]?'<b style="color:red;">'+i[e]+"</b>":i[e])})});var r=t.retData[12].split("$");a(".j-row-zx3").each(function(t,s){var i=r[t].split("|"),o=e.max(i,function(a){return parseInt(a)});a(this).find(".data-bit-"+t).find(".j-yilou").each(function(e,t){a(this).html(o==i[e]?'<b style="color:red;">'+i[e]+"</b>":i[e])})})}})}function p(){if(a("#j-current-issue").html(z.qihao),D)a("#j-less-info").html("停止销售");else if(C>0){var e=Math.floor(C/3600),t=Math.floor(C/60%60),s=C%60;t=String(10>t?"0"+t:t),s=String(10>s?"0"+s:s);var i='<span class="m-time-djs" >'+t.slice(0,1)+'</span><span class="m-time-djs" >'+t.slice(1,2)+'</span><span>分</span><span class="m-time-djs" >'+s.slice(0,1)+'</span><span class="m-time-djs" >'+s.slice(1,2)+"</span><span>秒</span>",o="";e>=10?(e=String(e),o='<span class="m-time-djs" >'+e.slice(0,1)+'</span><span class="m-time-djs" >'+e.slice(1,2)+"</span><span>时</span>",o+=i):e>0?(o='<span class="m-time-djs" >0</span><span class="m-time-djs" >'+e+"</span><span>时</span>",o+=i):o+=i,a("#j-less-info").html(o)}else a("#j-less-info").html("销售时间截止"),n()}function u(t,s){for(var i=a("#j-box-left .j-choose-code-"+M.playType),o=2;o>=0;o--)o!=s&&i.find(".j-row-code[data-bit="+o+"]").each(function(s,i){M.codes[o]&&a.inArray(t,M.codes[o])>=0&&(e.remove(M.codes[o],function(a){return a==t}),a(this).find(".j-num-group a.active").each(function(e,s){a(this).html()===t&&a(this).removeClass("active")}))})}function h(){M.zhushu=0,M.money=0;var a=i.getBetNum(M.playType,M.codes);M.zhushu+=a,M.money+=2*a}function d(){M.zhushu>0?(a("#choose_to_buy").addClass("active"),a("#choose_to_buy").removeAttr("disabled")):(a("#choose_to_buy").removeClass("active"),a("#choose_to_buy").attr("disabled","disabled")),a("#choose_zhushu").html(M.zhushu),a("#choose_money").html(M.money)}function y(){for(var a=0,e=z.codes.length-1;e>=0;e--)a+=i.getBetNum(z.codes[e].playType,z.codes[e].value);z.zhushu=a,z.money=2*a*z.mutiple}function m(){if(a("#buy_zhushu").html(z.zhushu),a("#project_price").html(z.money),a("#track_issue_num").html(0),a("#track_money").html(0),Object.size(z.trackData.issueMutipleMap)>0){var e=0;z.money=0;for(var t in z.trackData.issueMutipleMap){e++;var s=2*z.zhushu*z.trackData.issueMutipleMap[t].mutiple;z.money+=s,a(".br-details").find("tbody .br-zhui-c").each(function(e,i){return a(this).attr("data-qihaoid")==t?void a(this).parents("tr").find(".j-money").html(s):void 0})}a("#track_issue_num").html(e),a("#track_money").html(z.money)}z.money>0?a("#buy-submit").removeAttr("disabled"):a("#buy-submit").attr("disabled","disabled")}function b(e,t){if(M.money>i.maxOneBetMoney)return s.showTips("您好，单个投注的金额应小于"+i.maxOneBetMoney+"元，请返回重新选择"),!1;if(z.codes.length+M.codes.length>i.maxBuyCodeLength)return s.showTips("您的投注号码多于"+i.maxBuyCodeLength+"行，请返回重新选择"),!1;var o=t,n="";switch(z.rowIndex++,e){case i.playType.R1:case i.playType.R2:case i.playType.R3:case i.playType.R4:case i.playType.R5:case i.playType.R6:case i.playType.R7:case i.playType.R8:case i.playType.Z2:case i.playType.Z3:var l=2*i.getBetNum(e,o);n+='<div class="br-zhu-item clearfix" dataBit='+z.rowIndex+">",n+="<b>["+i.playCNType[e]+"]</b>",n+='<div class="list">',n+='<span data-c="0">'+o[0].join(" ")+"</span>",n+="</div>",n+='<div class="pull-right"><b><i class="money" data-m="1">'+l+'</i>元</b><a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>';break;case i.playType.Q2:var l=2*i.getBetNum(e,o);n+='<div class="br-zhu-item clearfix" dataBit='+z.rowIndex+">",n+="<b>["+i.playCNType[e]+"]</b>",n+='<div class="list">',n+='<span data-c="0">'+o[0].join(" ")+","+o[1].join(" ")+"</span>",n+="</div>",n+='<div class="pull-right"><b><i class="money" data-m="1">'+l+'</i>元</b><a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>';break;case i.playType.Q3:var l=2*i.getBetNum(e,o);n+='<div class="br-zhu-item clearfix" dataBit='+z.rowIndex+">",n+="<b>["+i.playCNType[e]+"]</b>",n+='<div class="list">',n+='<span data-c="0">'+o[0].join(" ")+","+o[1].join(" ")+","+o[2].join(" ")+"</span>",n+="</div>",n+='<div class="pull-right"><b><i class="money" data-m="1">'+l+'</i>元</b><a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>';break;default:return!1}return z.codes.push({key:z.rowIndex,value:o,playType:e}),a("#code_list").append(n),!0}function f(e){a(".j-num-group a.active").removeClass();var t={};for(var s in z.codes)if(z.codes[s].key==e){t=z.codes[s];break}M.init();for(var i=0;i<t.value.length;i++)M.codes[i]=[],a(".j-choose-code-"+t.playType).find(".j-row-code[data-bit="+i+"] a").each(function(e){for(var s=0;s<t.value[i].length;s++)a(this).html()==t.value[i][s]&&(a(this).addClass("active"),M.codes[i].push(t.value[i][s]))});h(),d()}function v(){a(".br-zhu-l").html(""),a("#sd-list").html(""),z.init(),y(),m()}function j(e){var t="";z.trackData.issueMutipleMap={},a(".br-details thead .br-zhui-bei").val(1),a.ajax({url:"/lottery/issue/get-issue-list?lottery_id="+lotyId+"&issue_size="+e,type:"GET",dataType:"json"}).done(function(e){if(1e5==e.retCode)for(var s=0;s<e.retData.length;s++){var i=s+1,o=2*z.zhushu;z.trackData.issueMutipleMap[e.retData[s][0]]={qihao:e.retData[s][1],mutiple:1},t+="<tr><td>"+i+'</td><td><input type="checkbox" class="br-zhui-c" data-qihaoid="'+e.retData[s][0]+'"data-qi="'+e.retData[s][1]+'" checked="">'+e.retData[s][1]+'期</td><td><input type="text" class="br-input br-zhui-bei" value="1">倍</td><td><span class="j-money">'+o+'</span>元</td><td><span class="ml15">'+e.retData[s][2]+"</span></td></tr>"}else t='<tr><td colspan="5">系统繁忙， 请稍候再试</td></tr>';a("#track_issue_list").html(t),y(),m()}).fail(function(){t='<tr><td colspan="5">系统繁忙， 请稍候再试</td></tr>',a("#track_issue_list").html(t)})}function T(a,e,t,s,i,o,n,l,c,r){var p='<div class="frbox"><img src="'+staticHostURI+'/front_images/fail.png" alt="success" class="icon"><div class="text">';switch(a){case 1:p+="<p>"+e+" 第<span>"+t+"</span>期</p><p>共<span>"+s+"</span>注, 投注<span>"+i+'</span>倍</p><p>本次需支付<span class="fc-3">'+o.toFixed(2)+"</span>元</p>";break;case 2:p+="<p>追号<span>"+c+'</span>期</p><p>本次需支付<span class="fc-3">'+r+"</span>元</p>";case 4:break;case 3:p+=l>0?"<p>"+e+" 第<span>"+t+'</span>期</p><p>方案总金额<span class="fc-3">'+o.toFixed(2)+"</span>元</p><p>您认购<span>"+n.toFixed(2)+"</span>元, 保底<span>"+l.toFixed(2)+'</span>元</p><p>共需支付<span class="fc-3">'+(n+l).toFixed(2)+"</span>元</p>":"<p>"+e+" 第<span>"+t+'</span>期</p><p>方案总金额<span class="fc-3">'+o.toFixed(2)+"</span>元</p><p>您认购<span>"+n.toFixed(2)+'</span>元</p><p>共需支付<span class="fc-3">'+(n+l).toFixed(2)+"</span>元</p>"}return p+='<div class="btns"><button class="btn btn-danger" id="buyConfirm">确定</button><button class="btn btn-gray" data-dismiss="modal">取消</button></div></div></div>'}function _(a,e,i,o,n,l,c){1e5==a?(t.set("lotyName",l),t.set("lotyCNName",c),t.set("payMoney",n),t.set("projectNo",i),t.set("trackId",o),window.location.href="/html/lottery/trade/success.html"):s.handRetCode(a,e)}function g(a,e){t.set("lotyName",a),t.set("lotyCNName",e),window.location.href="/html/lottery/trade/fail.html"}var k={gdx:"粤11选5",dlc:"赣11选5",syy:"十一运夺金",xjx:"新疆11选5"},z={lotyName:"",lotyId:1,lotyCNName:"",playName:"",codes:[],zhushu:0,mutiple:1,money:0,qihaoId:0,isManual:!1,qihao:a("#qihao").val(),alertStopModal:0,partnerBuy:{projectTitle:"11选5合买方案",projectDescription:"11选5",partBuyMoney:0,partAegisMoney:0,commissionPercent:0,shareLevel:1},rowIndex:0,buyType:1,trackData:{issueMutipleMap:{},trackStopMoney:0},proxyBuy:{betNum:2,mutiple:1,issueSize:10},init:function(){this.lotyName=a("#lotyName").val(),this.playName=a("#playName").val(),this.lotyCNName=k[this.lotyName],this.codes=[],this.zhushu=0,this.mutiple=1,this.money=0,this.isManual=!1,this.partnerBuy={projectTitle:"11选5合买方案",projectDescription:"11选5",partBuyMoney:0,partAegisMoney:0,commissionPercent:0,shareLevel:1},this.rowIndex=0,this.buyType=1,this.proxyBuy={betNum:2,multiple:1,issueSize:10}}},M={codes:[],zhushu:0,money:0,playType:"R1",init:function(){this.codes=[],this.zhushu=0,this.money=0}},x={codeKey:-1,codeObj:{}},C=0,D=!1,w=0;o(),a("#j-touzhu-tips").on("click",function(e){a(this).toggleClass("active"),a("#j-touzhu-tipstext").toggle()}),a(".j-num-group").on("click","a",function(t){t.preventDefault();var s=parseInt(a(this).parents(".j-row-code").attr("data-bit")),i=null,o=a(this).html();M.codes[s]||(M.codes[s]=[]),i=M.codes[s].concat(),a(this).hasClass("active")?e.remove(i,function(a){return a==o}):(u(o,s),i.push(o)),M.codes[s]=i,M.codes[s].sort(),a(this).toggleClass("active"),h(),d()}),a(".j-quick-method").on("click","span",function(e){e.preventDefault(),a(this).toggleClass("active");var t=parseInt(a(this).parents(".j-row-code").attr("data-bit"));switch(M.codes[t]=[],a(this).attr("data-type")){case"odd":a(this).parents(".j-row-code").find(".j-num-group a").each(function(e){a(this).removeClass("active"),e%2==0&&(a(this).toggleClass("active"),u(a(this).html(),t),M.codes[t].push(a(this).html()))});break;case"even":a(this).parents(".j-row-code").find(".j-num-group a").each(function(e){a(this).removeClass("active"),e%2!=0&&(u(a(this).html(),t),a(this).toggleClass("active"),M.codes[t].push(a(this).html()))});break;case"big":a(this).parents(".j-row-code").find(".j-num-group a").each(function(e){a(this).removeClass("active"),e>5&&(u(a(this).html(),t),a(this).toggleClass("active"),M.codes[t].push(a(this).html()))});break;case"small":a(this).parents(".j-row-code").find(".j-num-group a").each(function(e){a(this).removeClass("active"),5>=e&&(u(a(this).html(),t),a(this).toggleClass("active"),M.codes[t].push(a(this).html()))});break;case"all":a(this).parents(".j-row-code").find(".j-num-group a").each(function(e){u(a(this).html(),t),a(this).addClass("active"),M.codes[t].push(a(this).html())});break;case"clean":M.codes[t].length=0,a(this).parents(".j-row-code").find(".j-num-group a").each(function(e){a(this).removeClass("active")})}h(),d()}),a("#choose_to_buy").on("click",function(e){var t=!1;if(!(M.zhushu<1)){switch(parseInt(a("#choose_to_buy").attr("data-add"))){case 0:if(M.money>i.maxOneBetMoney)return s.showTips("您好，单个投注的金额应小于"+i.maxOneBetMoney+"元，请返回重新选择"),!1;for(var o in z.codes)z.codes[o].key==x.codeKey&&(z.codes[o].value=M.codes);var n="";switch(M.playType){case i.playType.R1:case i.playType.R2:case i.playType.R3:case i.playType.R4:case i.playType.R5:case i.playType.R6:case i.playType.R7:case i.playType.R8:case i.playType.Z2:case i.playType.Z3:n='<div class="br-zhu-item clearfix" databit="'+x.codeKey+'">',n+="<b>["+i.playCNType[M.playType]+"]</b>",n+='<span data-c="0">'+M.codes[0].join(" ")+"</span>",n+='<div class="pull-right">',n+='<b><i class="money" data-m="1">'+M.money+"</i>元</b>",n+='<a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>';break;case i.playType.Q2:n='<div class="br-zhu-item clearfix" databit="'+x.codeKey+'">',n+="<b>["+i.playCNType[M.playType]+"]</b>",n+='<span data-c="0">'+M.codes[0].join(" ")+","+M.codes[1].join(" ")+"</span>",n+='<div class="pull-right">',n+='<b><i class="money" data-m="1">'+M.money+"</i>元</b>",n+='<a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>';break;case i.playType.Q3:n='<div class="br-zhu-item clearfix" databit="'+x.codeKey+'">',n+="<b>["+i.playCNType[M.playType]+"]</b>",n+='<span data-c="0">'+M.codes[0].join(" ")+","+M.codes[1].join(" ")+","+M.codes[2].join(" ")+"</span>",n+='<div class="pull-right">',n+='<b><i class="money" data-m="1">'+M.money+"</i>元</b>",n+='<a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>';break;default:return!1}x.codeObj.replaceWith(n),t=!0;break;case 1:switch(M.playType){case i.playType.R1:case i.playType.R2:case i.playType.R3:case i.playType.R4:case i.playType.R5:case i.playType.R6:case i.playType.R7:case i.playType.R8:case i.playType.Z2:case i.playType.Z3:t=b(M.playType,M.codes);break;case i.playType.Q2:case i.playType.Q3:t=b(M.playType,M.codes);break;default:return!1}}t&&(y(),m(),a("#choose_zhushu").html(0),a("#choose_money").html(0),a("#sd_number").val(""),a(".j-num-group a.active").removeClass(),M.init(),a("#choose_to_buy_tip").html("添加到投注列表"),a("#choose_to_buy").attr("data-add",1),a("#choose_to_buy").removeClass("active"),a("#choose_to_buy").attr("disabled","disabled"))}}),a(".j-zhu-adds").on("click",function(e){e.preventDefault();var t=parseInt(a(this).attr("data-zhu"));if(z.codes.length+t>i.maxBuyCodeLength)return void s.showTips("您的投注号码多于"+i.maxBuyCodeLength+"行，请返回重新选择");for(var o=t-1;o>=0;o--){var n=i.produceCode(M.playType);if(!1===n)return;b(M.playType,n)}y(),m(),d()}),a(".br-zhu-l").on("click",".br-zhu-item",function(e){e.preventDefault(),z.isManual||"A"!=e.target.tagName&&(f(a(this).attr("databit")),a("#choose_to_buy").addClass("active"))}),a(".br-zhu-l").on("click",".br-zhu-del",function(t){a(this).parents(".br-zhu-item")[0]==x.codeObj[0]&&(a("#choose_to_buy").attr("data-add",1),a("#choose_to_buy_tip").html("添加到投注列表"));var s=a(this).parents(".br-zhu-item").attr("dataBit");e.remove(z.codes,function(a){return a.key==s}),a(this).parents(".br-zhu-item").remove(),y(),m()}),a(".br-zhu-l").on("click",".br-zhu-set",function(e){var t=a(this).parents(".br-zhu-item").attr("databit");f(t),a("#choose_to_buy").addClass("active"),a("#choose_to_buy").attr("data-add",0),a("#choose_to_buy_tip").html("修改投注号码"),x={codeKey:t,codeObj:a(this).parents(".br-zhu-item")}}),a("#clean_buy_code").on("click",function(e){a("#code_list").html("");var t=z.buyType;z.init(),y(),m(),z.buyType=t}),a("#decrease_mutiple").on("click",function(e){e.preventDefault();var t=a("#project_mutiple"),s=parseInt(t.val());s--,z.mutiple=s<i.minMultiple?i.minMultiple:s>i.maxMultiple?i.maxMultiple:s,t.val(z.mutiple),y(),m()}),a("#project_mutiple").on("change",function(e){e.preventDefault();var t=parseInt(a(this).val())||0;z.mutiple=t<i.minMultiple?i.minMultiple:t>i.maxMultiple?i.maxMultiple:t,a(this).val(z.mutiple),y(),m()}),a("#increase_mutiple").on("click",function(e){e.preventDefault();var t=a("#project_mutiple"),s=parseInt(t.val());s++,z.mutiple=s<i.minMultiple?i.minMultiple:s>i.maxMultiple?i.maxMultiple:s,t.val(z.mutiple),y(),m()}),a("#buy-submit").on("click",function(e){return e.preventDefault(),a(this).parents(".br-tou").find(".j-sub-agreed")[0].checked===!1?void s.showTips("请先阅读并同意《委托投注规则》后才能继续"):void N()}),a("#buy_type").on("click","a",function(e){switch(e.preventDefault(),z.trackData.issueMutipleMap={},a("#buy_mutiple_span").show(),z.partnerBuy={projectTitle:"11选5合买方案",projectDescription:"11选5"},z.buyType=parseInt(a(this).attr("data-buytype")),z.mutiple=1,a("#project_mutiple").val(z.mutiple),z.buyType){case 1:a("#track_desc").addClass("hide");break;case 2:a("#buy_mutiple_span").hide(),a("#track_desc").removeClass("hide"),j(10)}y(),m()}),a("#issue_size").on("change",function(e){e.preventDefault(),z.trackData.issueMutipleMap={},j(a(this).val())}),a(".br-details thead .br-zhui-c").on("change",function(e){var t=a(this)[0].checked;a(this).parents(".br-details").find("tbody .br-zhui-c").each(function(a,e){e.checked=t}),z.trackData.issueMutipleMap={},a(this).parents(".br-details").find("tbody .br-zhui-c").each(function(e,t){t.checked&&(z.trackData.issueMutipleMap[a(this).attr("data-qihaoid")]={qihao:a(this).attr("data-qi"),mutiple:a(this).parents("tr").find(".br-zhui-bei").val()})}),y(),m()}),a(".br-details").on("change","tbody .br-zhui-c",function(e){e.preventDefault(),z.trackData.issueMutipleMap={},a(this).parents(".br-details").find("tbody .br-zhui-c").each(function(e,t){t.checked&&(z.trackData.issueMutipleMap[a(this).attr("data-qihaoid")]={qihao:a(this).attr("data-qi"),mutiple:a(this).parents("tr").find(".br-zhui-bei").val()})}),y(),m()}),a(".br-details thead .br-zhui-bei").on("change",function(e){var t=parseInt(a(this).val())||1;isNaN(t)||1>t?t=1:(t=Math.ceil(t),t>9999&&(t=9999)),a(this).val(t);var s=a(this).parents(".br-details");s.find("tbody .br-zhui-bei").val(t),s.find("tbody .br-zhui-c").each(function(e,t){t.checked="checked",z.trackData.issueMutipleMap[a(this).attr("data-qihaoid")]={qihao:a(this).attr("data-qi"),mutiple:a(this).parents("tr").find(".br-zhui-bei").val()}}),y(),m()}),a(".br-details tbody").on("change",".br-zhui-bei",function(e){var t=parseInt(a(this).val())||1;isNaN(t)||1>t?t=1:(t=Math.ceil(t),t>9999&&(t=9999)),a(this).val(t);var s=a(this).parents("tr"),i=s.find(".br-zhui-c");i.attr("checked","checked"),z.trackData.issueMutipleMap[i.attr("data-qihaoid")]={qihao:i.attr("data-qi"),mutiple:s.find(".br-zhui-bei").val()},y(),m()}),a('#buy_type a[data-toggle="tab"]').on("click",function(e){a(this).parents("#buy_type").find(".icon-y2").removeClass("icon-y2"),a(this).find(".icon").addClass("icon-y2")}),a("#track_stop_money").on("change",function(){event.preventDefault();var e=parseInt(a(this).val())||3e3;a(this).val(e)}),a("#j-nav").on("click","a",function(e){e.preventDefault();var t=a(this).parents("li");t.addClass("active"),t.siblings().removeClass("active"),M.playType=a(this).attr("data-playtype");var s=a("#j-box-left .j-choose-code-"+M.playType);s.show(),s.siblings().hide(),z.init(),M.init(),v(),h(),d(),y(),m(),a("#choose_zhushu").html(0),a("#choose_money").html(0),a("#sd_number").val(""),a("#choose_to_buy_tip").html("添加到投注列表"),a("#choose_to_buy").attr("data-add",1),a("#choose_to_buy").removeClass("active"),a("#choose_to_buy").attr("disabled","disabled"),a("#choose_to_buy").attr("data-add","1"),a(".j-num-group a.active").removeClass(),a("#buy-submit").attr("disabled","disabled"),a("li[name='auto_produce']").show(),a("#j-box-right").show(),a("#j-box-bottom").show(),a("#j-box-left").removeClass("multiphase-box")});var N=function(){for(var e="",t=[],o="",n=0;n<z.codes.length;n++)switch(o=z.codes[n].playType,z.codes[n].playType){case i.playType.R1:case i.playType.R2:case i.playType.R3:case i.playType.R4:case i.playType.R5:case i.playType.R6:case i.playType.R7:case i.playType.R8:case i.playType.Z2:case i.playType.Z3:t.push(z.codes[n].playType+"|"+z.codes[n].value[0].join(" "));break;case i.playType.Q2:t.push(z.codes[n].playType+"|"+z.codes[n].value[0].join(" ")+","+z.codes[n].value[1].join(" "));break;case i.playType.Q3:t.push(z.codes[n].playType+"|"+z.codes[n].value[0].join(" ")+","+z.codes[n].value[1].join(" ")+","+z.codes[n].value[2].join(" "));break;default:return}var l={zhushu:z.zhushu,beishu:z.mutiple,codes:t.join("$"),unikey:(new Date).valueOf()},c="";switch(z.buyType){case 1:e="/lottery/kuaipin/buy-self/"+z.lotyName+"/"+o,l.qihaoId=z.qihaoId,l.qihao=z.qihao,c=T(1,z.lotyCNName,l.qihao,z.zhushu,z.mutiple,z.money,0,0,0,0);break;case 2:e="/lottery/kuaipin/buy-track/"+z.lotyName+"/"+o;var r=[];for(var p in z.trackData.issueMutipleMap)r.push(p+"|"+z.trackData.issueMutipleMap[p].qihao+"|"+z.trackData.issueMutipleMap[p].mutiple);if(r.length<1)return void s.showTips("追号最少购买一期");l.endminmoney=a("#is_end_zhongjiang")[0].checked?1:0,l.zhuihaoqihao=r,w=z.money,c=T(2,z.lotyCNName,0,0,0,0,0,0,r.length,z.money)}var u="";switch(z.buyType){case 1:u+="<p>"+z.lotyCNName+' 第<span class="fc-3 mlr5">'+l.qihao+"</span>期</p>",u+='<p>共<span class="fc-3 mlr5">'+l.zhushu+'</span>注, 投注<span class="fc-3 mlr5">'+l.beishu+"</span>倍</p>";break;case 2:u+='<p>追号<span class="fc-3 mlr5">'+r.length+"</span>期</p>";break;case 3:u+="<p>"+z.lotyCNName+' 第<span class="fc-3 mlr5">'+l.qihao+"</span>期</p>",u+='<p>方案总金额<span class="fc-3 mlr5">'+z.money+".00</span>元</p>",u+='<p>您认购<span class="fc-3 mlr5">'+l.buyNum+'</span>份, 保底<span class="fc-3 mlr5">'+l.aegisNum+"</span>份</p>";break;case 4:u+='<p>多期投注：共<span class="fc-3 mlr5">'+l.zhushu+'</span>注，<span class="fc-3 mlr5">'+l.beishu+'</span>倍，<span class="fc-3 mlr5">'+l.qishu+"</span>期</p>"}u+='<p>本次需支付：<span class="fc-3 mlr5">'+z.money+".00</span>元",s.checkLogin(z.money,{enoughMoney:function(){s.showTips({html:c,title:"投注确认"}),a("#buyConfirm").one("click",function(t){a.ajax({url:e,type:"POST",dataType:"json",data:l}).done(function(a){return 1e5!==a.retCode?void s.showTips(a.retMsg):void _(a.retCode,a.retMsg,a.retData.projectNo,a.retData.trackId,z.money,z.lotyName,z.lotyCNName)}).fail(function(){g(z.lotyName,z.lotyCNName)})})},lessMoneyTips:u})}})});