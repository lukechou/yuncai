require.config({paths:{jquery:"../lib/jquery",lodash:"../lib/lodash.compat.min",bootstrap:"../lib/bootstrap.min",store:"../lib/store.min",app:"../common/app"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"}}}),require(["jquery","lodash","store","app","bootstrap"],function(t,a,e,n){"use strict";function s(t){var a=t?t:1;return isNaN(t)||1>t?a=1:(t=Math.ceil(t),t>9999&&(a=9999)),a}function i(a){t.trim(a.val())==a.attr("data-text")&&(a.parents("p").find(".j-btext-total").html(0),a.val(""))}function o(a){var e=a.attr("data-text");""==t.trim(a.val())&&(a.val(e),a.parents("p").find(".j-btext-total").html(e.length))}function r(t){var a=t.val().length,e=parseInt(t.attr("data-size"));e>=a?t.parents("p").find(".j-btext-total").html(a):(t.val(t.val().slice(0,e-1)),t.parents("p").find(".j-btext-total").html(e))}function u(){var a=z.getBuyArrTotalMoney(),e=t("#share-num").val()||a,n="",s="",i=t("#part_buy").val(),o="",r=1*t("#commission_percent").val()||0,u="",c="",h=parseInt(t("#part_aegis_num").val())||0,p=t("#has_part_aegis")[0].checked||!1;return e=Number(e.replace(/[^0-9]/g,"")),i=Number(i.replace(/[^0-9]/g,"")),0>=a?void l(0,r,0,0,0,0,0):(a%e===0?n=a/e:(n=1,e=a),0>=i&&(i=1),i>e&&(i=e),r>i/e*100&&(i=Math.ceil(e*r*.01)),s=i*n,t("#has_part_aegis")[0]&&(p=t("#has_part_aegis")[0].checked),p?(t("#part_aegis_num")[0].disabled=!1,u=0===h?.8>i/e?Math.ceil(.2*e):e-i:e>h+i?.2>h/e?Math.ceil(.2*e)+i>e?e-i:Math.ceil(.2*e):h:e-i,c=(u/e*100).toFixed(2)):(t("#part_aegis_num")[0].disabled=!0,u=0,c="0.00"),o=0===a?0:(i/e*100).toFixed(2),void l(e,n,i,r,o,c,u))}function l(a,e,n,s,i,o,r){var u={},l=r*e||0,c=(n+r)*e||0;0===a&&(e=0),u.shareNum=a,u.partBuyNum=n,u.unitPrice=e,u.commissionPercent=parseInt(t("#commission_percent").val()),u.partAegisNum=r,t("#share-num").val(a),t(".j-unit-price").html(e),t("#part_buy").val(n),t("#part_buy_percent").html(i),t("#part_aegis_num").val(r),t("#part_aegis_percent").html(o),t("#buy_money_tips").html(n*e),t("#aegis_money_tips").html(l),t("#total_money_tips").html(c)}function c(){var t=10;h(),p(),y(),b(),z.statu=1,setInterval(function(){h(),p(),y()},1e3*t)}function h(){var a="/lottery/award/kuaipin/"+z.lotyName,e=t("#j-todaynum-table tbody"),n=e.attr("data-qihao");n&&n===z.qihao||t.ajax({url:a,type:"GET",dataType:"json",data:{t:"ajx"}}).done(function(a){for(var n=z.qihao.slice(0,z.qihao.length-2),s=(~~t("#j-maxqishu").val(),84),i=21,o=[],r="",u=null,l="",c="",h=0;i>h;h++)o.push([]);for(var h=1;s>=h;h++)u=null,r=10>h?"0"+h:h,a[n+r]?(u=a[n+r],u.index=r):u={index:r},o[h%i]?o[h%i].push(u):(o[h%i]=[],o[h%i].push(u));o[o.length]=o[0];for(var h=1,p=o.length;p>h;h++){l+="<tr>";for(var r=0;r<o[h].length;r++)c=o[h][r],l+='<td class="period">'+c.index+"</td>",l+=c.code_str?'<td class="awardTd">'+c.code_str+"</td>":"<td>- -</td>",l+=c.hz_val?"<td>"+c.hz_val+"</td>":"<td></td>",l+=c.shape?"<td>"+c.shape+"</td>":"<td></td>";l+="</tr>"}e.html(l),e.attr("data-qihao",z.qihao)})}function p(){t.ajax({url:"/lottery/issue/get-last-award-info",type:"GET",dataType:"json",data:{lotteryId:z.lotyId}}).done(function(a){if(1e5===a.retCode){for(var e="",n=0;n<a.retData.length&&!(n>5);n++)e+="<tr>",e+="<td>"+a.retData[n].username+"</td>",e+="<td>"+a.retData[n].bonus_before_tax+"</td>",e+="</tr>";t("#j-new-bonus-list").html(""==e?'<tr><td colspan="2">暂无相关中奖纪录</td></tr>':e)}else t("#j-new-bonus-list").html('<tr><td colspan="2">系统繁忙</td></tr>')})}function d(e,n){var s="等待开奖",i=[];""!=e&&(i=e.split(" "),i=a.map(i,function(t){return'<span class="bg-3">'+t+"</span>"}),s=i.join("")),t("#j-last-issue-no").html(n),t("#j-new-num").html(s)}function m(a){for(var e="",n="",s=0,i=a.length;i>s;s++)e=""===a[s].kjhm?"等待开奖":'<span class="fc-3">'+a[s].kjhm+"</span>",n+="<tr><td>"+a[s].no+"</td><td>"+e+"</td></tr>";t("#j-last-issue-n").html(n)}function y(){t.ajax({url:"/lottery/issue/kuaipin/last-issue-n",type:"GET",dataType:"json",data:{loty_name:z.lotyName,issue_num:10}}).done(function(t){var a=t.retData,e=a[0],n=e.kjhm,s=e.no;1e5==t.retCode&&(m(a),d(n,s))})}function b(){var a=t("#issue_size").val();t.ajax({url:"/lottery/issue/get-cur-issue",type:"GET",dataType:"json",data:{lottery_id:z.lotyId}}).done(function(e){{var s=e.retData[0],i="",o="";~~t("#j-maxqishu").val()||100}if(i=Math.floor(s.company_sell_etime-s.sys_time),1e5===e.retCode){if(o=0===parseInt(s.sell_status,10))return z.showStopControl&&(n.showStopSellModal(z.lotyCnName),t("#buy-submit").html("暂停销售").removeClass("btn-red").addClass("btn-stop").attr("disabled",!0),t("#j-less-info").html("暂停销售"),z.showStopControl=!1),void _(10);z.showStopControl=!0,t("#buy-submit").html("立即投注").addClass("btn-red").removeClass("btn-stop").removeAttr("disabled"),z.qihao!=s.issue_num&&(z.qihao=s.issue_num,z.qihaoId=s.id),0>i?(t("#j-less-info").html("销售时间截止"),z.waitSell=!0,y(),_(10)):(g(i),z.waitSell=!1,t("#j-current-issue").html(z.qihao),t(".br-details thead .br-zhui-c")[0].checked=!0,C(a))}}).fail(function(){_(10)})}function v(t){var a=[],e=~~(t/60/60),n=~~(t/60%60),s=t%60;return 10>e&&(e=0>=e?null:"0"+e),10>n&&(n="0"+n),10>s&&(s="0"+s),e&&a.push(e),a.push(n,s),a}function f(e){var n=v(e),s="";n=a.map(n,function(t){var a=String(t).split("");return'<span class="m-time-djs" >'+a[0]+'</span><span class="m-time-djs" >'+a[1]+"</span>"}),s=3===n.length?n[0]+"<span>时</span>"+n[1]+"<span>分</span>"+n[2]+"<span>秒</span>":n[0]+"<span>分</span>"+n[1]+"<span>秒</span>",t("#j-less-info").html(s)}function g(a){a=0>a?0:a,f(a);var e=~~((new Date).getTime()/1e3),s=t("#j-current-issue").html();z.nextTimer=e+a,z.runTimer=setInterval(function(){var t=~~((new Date).getTime()/1e3),a=z.nextTimer-t;a>0?f(a):(f(0),z.alertQihao!==s&&(n.showTips("您好，第 "+s+"期已截止，投注时请确认您选择的期号。"),z.alertQihao=s),y(),z.runTimer&&clearInterval(z.runTimer),b())},1e3)}function _(t){var e=null;e=t&&a.isNumber(t)&&t>0?1e3*t:1e4;setTimeout(function(){b()},e)}function T(t){if(""===t)return t;var a=parseInt(t,10);return isNaN(a)?a=1:(a=a>=1?a:1,a=a),a=a>9999?9999:a}function j(t,a){var e=parseInt(t,10);return 1==a?e++:e--,e=e>=1?e:1,e=e>9999?9999:e}function k(a){var e=t("#project_mutiple");z.beishu=a,e.val(a),z.updateBottomUi()}function C(e){var n="";n='<tr><td colspan="5">系统繁忙， 请稍候再试</td></tr>',t(".br-details thead .br-zhui-bei").val(1),t.ajax({url:"/lottery/issue/get-issue-list?lottery_id="+z.lotyId+"&issue_size="+e,type:"GET",dataType:"json"}).done(function(e){var s=e.retData;if(1e5==e.retCode){a.isArray(s)&&s.length&&(n="");for(var i=0;i<s.length;i++){var o=i+1,r=z.getBuyArrTotalMoney();n+="<tr><td>"+o+'</td><td><input type="checkbox" class="br-zhui-c" data-qihaoid="'+s[i][0]+'"data-qi="'+s[i][1]+'" checked="">'+s[i][1]+'期</td><td><input type="text" class="br-input br-zhui-bei" value="1">倍</td><td><span class="j-money">'+r+'</span>元</td><td><span class="ml15">'+s[i][2]+"</span></td></tr>"}}t("#track_issue_list").html(n),z.updateTrackList()}).fail(function(){t("#track_issue_list").html(n),z.updateTrackList()})}var N={};N.a=function(t){try{return 1==t||2==t?t:t*N.a(t-1)}catch(a){alert(a)}},N.getACTotalNum=function(t,a,e){if(t==a)return 1;if(a>t)return 0;a=2*a>t?t-a:a;var n=N.a(t)/N.a(t-a);return"A"===e?n:"C"===e?n/N.a(a):0};var z=function(){var e={lotyCnName:a.escape(t("#j-lotyCnName").val()),qihaoId:a.escape(t("#qihaoId").val()),qihao:a.escape(t("#qihao").val()),lotyName:t("#j-lotyName").val(),lotyId:t("#j-track-lotyid").val(),playType:"b0",chooseMoney:0,chooseZhushu:0,buyArr:[],playName:{b0:"选一数投",b1:"选一红投",b2:"任选二",b3:"任选三",b4:"任选四",b5:"任选五",b6:"选二连组",b7:"选三前组"},buyCodesType:{b0:"F1",b1:"A1",b2:"R2",b3:"R3",b4:"R4",b5:"R5",b6:"B2",b7:"B3"},beishu:1,trackData:[],buyType:1,runTimer:null,kjStatus:0,currentKjStatus:null,runWaitTimer:null,waitEndTime:0,waitStartTime:0,alertQihao:null,waitSell:!1,modifyId:null,modifyStatu:0,showStopControl:!0};return e}();z.updateYilou=function(){var e=this;t.ajax({url:"/statistics/issue/yilou",type:"get",dataType:"json",data:{lottery_id:e.lotyId,issue:e.qihao}}).done(function(n){if(1e5===n.retCode){var s={b0:1,b1:2,b2:3,b3:4,b4:5,b5:6,b6:7,b7:8};if(n.retData[s[e.playType]]){var i=n.retData[s[e.playType]].split("|");i=a.map(i,function(t){return Number(t)});for(var o=a.max(i),r=null,u=0;u<i.length;u++)r=i[u]===o?'<span class="fc-3">'+i[u]+"</span>":i[u],t(".j-choose-"+e.playType+" .j-yilou-num").eq(u).html(r)}}})},z.runYilou=function(){var t=this;setInterval(function(){t.updateYilou()},1e4)},z.updateYilou(),z.runYilou(),z.reset=function(){var t=this;t.cleanNumBtn(),t.cleanBuyList(),t.buyArr=[],t.chooseMoney=0,t.chooseZhushu=0,t.beishu=1},z.updateBottomUi=function(){var a=this,e=0;e=a.getBuyArrTotalMoney(),t("#buy_zhushu").html(e/2),t("#project_price").html(a.beishu*e),a.updateTrackList()},z.setNameStr=function(t){var e="";if(t&&a.isArray(t))for(var n=0;n<t.length;n++)e+="<span>"+t[n]+"</span>";return e},z.createOneNote=function(e,n){var s=this;s.saveNumsObj(e);var i={title:s.playName[e.playType],nums:e.nums,money:e.money,zid:e.zid,num:""};i.num=s.setNameStr(i.nums);var o=null,r=null;1!==s.modifyStatu||n?(o=a.template('<div data-zid="<%= zid%>" class="br-zhu-item clearfix"><b>[<%= title%>]</b><div class="list"><%= num%></div><div class="pull-right"><b><i class="money"><%= money%></i>元</b><a href="javascript:;" class="br-zhu-up">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div></div>'),r=o(i),t("#code_list").append(r)):(o=a.template('<b>[<%= title%>]</b><div class="list"><%= num%></div><div class="pull-right"><b><i class="money"><%= money%></i>元</b><a href="javascript:;" class="br-zhu-up">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div>'),r=o(i),t("#code_list").find("[data-zid="+s.modifyId+"]").html(r)),s.updateBottomUi()},z.addManyItem=function(t){var e=this;if(a.isNumber(t)&&t>0){if(e.buyArr.length+t>100)return void n.showTips("您的投注号码多于100行，请返回重新选择");for(var s=0;t>s;s++)e.createOneItem()}},z.createOneItem=function(){var t=this,e=[],n=null,s=[],i=1,o=["01","02","03","04","05","06","07","08","09",10,11,12,13,14,15,16,17,18,19,20],r={},r={b0:o.slice(0,18),b1:o.slice(18),b2:o,b3:o,b4:o,b5:o,b6:o,b7:o};switch(t.playType){case"b2":i=2;break;case"b3":i=3;break;case"b4":i=4;break;case"b5":i=5;break;case"b6":i=2;break;case"b7":i=3}r[t.playType]&&(s=a.sample(r[t.playType],i).sort(function(t,a){return t-a}),a.isArray(s)?e=s:e.push(s),n={zid:a.uniqueId(),nums:e,money:2,playType:t.playType},t.createOneNote(n,!0))},z.getObj=function(){var e=this,n=t("#j-area-"+e.playType+" .j-num-btn.active"),s=[],i={zid:a.uniqueId(),nums:null,money:null,playType:e.playType};return n.each(function(a,e){s.push(t(this).attr("data-num"))}),i.nums=s,i.money=e.chooseMoney,i},z.updateBuyArr=function(){var t=this,e=t.getObj();a.remove(t.buyArr,function(a){return a.zid==t.modifyId}),e.zid=t.modifyId,t.createOneNote(e),t.cleanNumBtn(),t.modifyStatu=0,t.toggleChooseToBuyBtn()},z.getChooseToBuy=function(){var t=this,a=t.getObj();t.createOneNote(a),t.cleanNumBtn()},z.saveNumsObj=function(t){var e=this;a.isArray(e.buyArr)||(e.buyArr=[]),e.buyArr.push({zid:t.zid,nums:t.nums,money:t.money,playType:t.playType})},z.cleanBuyList=function(){var a=this;a.buyArr=[],t("#code_list").html(""),a.updateBottomUi()},z.updateChooseToBuyBtn=function(){var a=this,e="active";a.chooseMoney>0?t("#choose_to_buy").addClass(e).removeAttr("disabled"):t("#choose_to_buy").removeClass(e)},z.setChooseParams=function(){var a=this,e=t("#j-area-"+a.playType+" .j-num-btn.active").length,n=null;switch(a.playType){case"b2":n=N.getACTotalNum(e,2,"C"),a.chooseZhushu=n,a.chooseMoney=2*n;break;case"b3":n=N.getACTotalNum(e,3,"C"),a.chooseZhushu=n,a.chooseMoney=2*n;break;case"b4":n=N.getACTotalNum(e,4,"C"),a.chooseZhushu=n,a.chooseMoney=2*n;break;case"b5":n=N.getACTotalNum(e,5,"C"),a.chooseZhushu=n,a.chooseMoney=2*n;break;case"b6":n=N.getACTotalNum(e,2,"C"),a.chooseZhushu=n,a.chooseMoney=2*n;break;case"b7":n=N.getACTotalNum(e,3,"C"),a.chooseZhushu=n,a.chooseMoney=2*n;break;default:a.chooseZhushu=e,a.chooseMoney=2*e}},z.updateMidTotal=function(){var a=this;a.setChooseParams(),t("#choose_zhushu").html(a.chooseZhushu),t("#choose_money").html(a.chooseMoney),a.updateChooseToBuyBtn()},z.cleanNumBtn=function(){var a=this;a.chooseMoney=0,a.chooseZhushu=0,t("#j-area-"+a.playType+" .j-num-btn").removeClass("active"),a.updateMidTotal()},z.updateHzBallList=function(e){var n=this,s=[[0,1,2,3,4,5,6],[1,3,5,7,9,11,13],[0,2,4,6,8,10,12],[7,8,9,10,11,12,13]],i=null,o=t("#j-area-"+n.playType+" .j-num-btn"),r="active";switch(e.length){case 1:i=s[e];break;case 2:i=a.intersection(s[e[0]],s[e[1]])}if(i){n.cleanNumBtn();for(var u=0;u<i.length;u++)o.eq(i[u]).addClass(r);n.updateMidTotal()}},z.updateCardGroup=function(e){var n=this;n.cleanNumBtn(),n.modifyId=e,n.modifyStatu=1;for(var s=a.find(n.buyArr,function(t){return t.zid==n.modifyId}),i=0;i<s.nums.length;i++)t("#j-area-"+n.playType+" [data-num="+s.nums[i]+"]").addClass("active");n.updateMidTotal(),n.toggleChooseToBuyBtn()},z.toggleChooseToBuyBtn=function(){var a=this,e=t("#choose_to_buy_tip");0===a.modifyStatu&&e.html("添加到投注列表"),1===a.modifyStatu&&e.html("确认修改")},z.removeBuyList=function(t){var e=this;a.remove(e.buyArr,function(a){return a.zid==t}),e.updateBottomUi()},z.togglePlayTab=function(){var t=this;t.cleanNumBtn(),t.cleanBuyList(),t.modifyStatu=0,t.toggleChooseToBuyBtn(),z.updateYilou()},z.getBuyArrTotalMoney=function(){for(var t=this,a=0,e=0;e<t.buyArr.length;e++)a+=~~t.buyArr[e].money;return a},z.buySuccess=function(t,a,s){var i=this;1e5==t.retCode?(e.set("lotyName",i.lotyName),e.set("lotyCNName",i.lotyCnName),e.set("payMoney",s),e.set("projectNo",t.retData.projectNo),e.set("trackId",t.retData.trackId),window.location.href="/html/lottery/trade/success.html"):n.handRetCode(t.retCode,t.retMsg)},z.enoughMoneyCb=function(a,e,n){var s=this;t.ajax({url:a,type:"post",dataType:"json",data:e}).done(function(t){s.buySuccess(t,e,n)})},z.getCodes=function(){for(var t=this,a=[],e="",n=[],s=0;s<t.buyArr.length;s++)a.push(t.buyCodesType[t.playType]+"|"+t.buyArr[s].nums.join(",")),n=n.concat(t.buyArr[s].nums);return e=a.join("$")},z.buyLoty=function(){var e=this,s="",i={},o=e.getBuyArrTotalMoney(),r=(e.playName[e.playType],""),u=0,l="buy-self",c=0;switch(i.zhushu=o/2,i.beishu=e.beishu,i.unikey=t.now(),i.codes=e.getCodes(),r+='<div class="frbox"><img src="http://static3.yuncai.com/front_images/fail.png" alt="success" class="icon"><div class="text">',e.buyType){case 1:i.qihaoId=e.qihaoId,i.qihao=e.qihao,u=o*i.beishu,r+="<p>"+e.lotyCnName+" 第<span>"+i.qihao+"</span>期</p>",r+="<p>共<span>"+i.zhushu+"</span>注, 投注<span>"+i.beishu+"</span>倍</p>",r+='<p>本次需支付<span class="fc-3">'+u+".00</span>元</p></div>";break;case 2:c=t("#is_end_zhongjiang")[0].checked?1:0,l="buy-track",i.zhuihaoqihao=[];for(var h=0,p=e.trackData.length;p>h;h++)i.zhuihaoqihao.push(e.trackData[h].tid+"|"+e.trackData[h].qi+"|"+e.trackData[h].bs);i.endminmoney=c,u=e.getTrackTotalMoney(e.getBuyArrTotalMoney()),r+="<p>追号<span>"+e.trackData.length+'</span>期</p><p>本次需支付<span class="fc-3">'+u+"</span>元</p></div>";break;case 3:i.qihaoId=e.qihaoId,i.qihao=e.qihao,i.title=a.escape(t("#title").val()),i.textarea=a.escape(t("#desc").val()),i.shareNum=Number(t("#share-num").val()),i.buyNum=Number(t("#part_buy").val()),i.aegisNum=Number(t("#part_aegis_num").val()),i.extraPercent=t("#commission_percent").val(),i.set=a.escape(t(".br-set-group .br-set.active").html()),u=o/i.shareNum*(i.buyNum+i.aegisNum),r+="<p>"+e.lotyCnName+" 第<span>"+i.qihao+'</span>期</p><p>方案总金额<span class="fc-3">'+o+"</span>元</p><p>您认购<span>"+i.buyNum+"</span>份",r+=i.aegisNum>0?", 保底<span>"+i.aegisNum+'</span>份</p><p>共需支付<span class="fc-3">'+u+"</span>元</p>":'</p><p>共需支付<span class="fc-3">'+u+"</span>元</p>"}s="/lottery/kuaipin/"+l+"/"+e.lotyName+"/"+e.buyCodesType[e.playType];var d="";2===e.buyType?d+='<p>追号<span class="fc-3 mlr5">'+i.zhuihaoqihao.length+"</span>期</p>":(d+="<p>"+e.lotyCnName+' 第<span class="fc-3 mlr5">'+e.qihao+"</span>期</p>",d+='<p>共<span class="fc-3 mlr5">'+i.zhushu+'</span>注, 投注<span class="fc-3 mlr5">'+i.beishu+"</span>倍</p>"),d+='<p>本次需支付：<span class="fc-3 mlr5">'+u+".00</span>元",n.checkLogin(u,{enoughMoney:function(){n.showTips({text:r,title:"投注确认",type:2,onConfirm:function(){e.enoughMoneyCb(s,i,u)}})},lessMoneyTips:d})},z.onToggleBuyType=function(a){var e=this;e.buyType=a,e.beishu=1,t("#project_mutiple").val(1),e.updateBottomUi()},z.updateTrackList=function(){var a=this;a.trackData=[];var e=null,n=null,s=null,i=0,o=a.getBuyArrTotalMoney();t("#track_issue_list").find(".br-zhui-c").each(function(i,r){var u=t(this);e=u.attr("data-qihaoid"),n=~~u.parents("tr").find(".br-zhui-bei").val(),s=u.attr("data-qi"),r.checked&&a.trackData.push({tid:e,bs:n,qi:s}),u.parents("tr").find(".j-money").html(o*n)}),i=a.getTrackTotalMoney(o),t("#track_issue_num").html(a.trackData.length),t("#track_money").html(i)},z.getTrackTotalMoney=function(t){for(var a=this,e=0,n=0;n<a.trackData.length;n++)e+=t*a.trackData[n].bs;return e},t(".br-details").on("change","tbody .br-zhui-c",function(t){t.preventDefault(),z.updateTrackList()}),t(".br-details").on("change","thead .br-zhui-c",function(a){a.preventDefault(),t(this)[0].checked?t("#track_issue_list .br-zhui-c").each(function(a,e){t(this)[0].checked=!0}):t("#track_issue_list .br-zhui-c").removeAttr("checked"),z.updateTrackList()}),t(".br-details").on("change","thead .br-zhui-bei",function(a){var e=parseInt(t(this).val())||1;e=s(e),t(this).val(e),t(".br-details tbody .br-zhui-bei").val(e),z.updateTrackList()}),t(".br-details tbody").on("change",".br-zhui-bei",function(a){var e=parseInt(t(this).val())||1;e=s(e),t(this).val(e),z.updateTrackList()}),t("#buy-submit").on("click",function(a){return a.preventDefault(),t(".j-sub-agreed")[0].checked?void(2===z.buyType&&0===z.trackData.length?n.showTips("追号最少购买一期"):0===z.buyArr.length?n.showTips("请至少选择1注号码投注"):z.buyLoty()):void n.showTips("请先阅读并同意《委托投注规则》后才能继续")}),t("#issue_size").on("change",function(a){a.preventDefault();var e=~~t(this).val();C(e)}),t("#increase_mutiple").on("click",function(a){var e=t("#project_mutiple"),n=e.val(),s=j(n,1);k(s)}),t("#decrease_mutiple").on("click",function(a){var e=t("#project_mutiple"),n=e.val(),s=j(n,0);k(s)}),t("#project_mutiple").on("keyup change",function(a){var e=t(this),n=(e.attr("data-r"),T(e.val()));n=n||1,k(n)}),t("#j-box-left").on("click",".j-zhu-adds",function(a){a.preventDefault();var e=~~t(this).attr("data-zhu");z.addManyItem(e)}),t("#j-box-left").on("click",".br-zhu-up",function(a){a.preventDefault();var e=t(this).parents(".br-zhu-item"),n=Number(e.attr("data-zid"));z.updateCardGroup(n)}),t("#j-box-left").on("click",".br-zhu-del",function(a){a.preventDefault();var e=t(this).parents(".br-zhu-item"),n=Number(e.attr("data-zid"));z.removeBuyList(n),e.remove(),z.modifyStatu=0,z.toggleChooseToBuyBtn()}),t("#j-nav").on("click","li",function(a){a.preventDefault();var e=t(this),n=e.attr("data-playtype");t("#j-nav li").removeClass("active"),e.addClass("active"),t(".box-choose").removeClass("active"),t(".j-choose-"+n).addClass("active"),z.playType=n,z.togglePlayTab()}),t("#j-box-left").on("click",".j-num-btn",function(a){a.preventDefault(),t(this).toggleClass("active"),z.updateMidTotal()}),t("#choose_to_buy").on("click",function(a){return a.preventDefault(),z.buyArr.length>=100?void n.showTips("您的投注号码多于100行，请返回重新选择"):z.chooseZhushu>1e4?void n.showTips("您好，单个投注的金额应小于2万元，请返回重新选择"):void(t(this).hasClass("active")&&(1===z.modifyStatu?z.updateBuyArr():z.getChooseToBuy()))}),t("#clean_buy_code").on("click",function(t){t.preventDefault(),z.cleanBuyList(),1===z.modifyStatu&&(z.modifyStatu=0,z.toggleChooseToBuyBtn())}),t("#buy_type").on("click",".j-tog-tab",function(a){a.preventDefault();var e=t(this);t("#buy_type li .icon").removeClass("icon-y2"),e.find(".icon").addClass("icon-y2");var n=e.find("a"),s=~~n.attr("data-buytype"),i=n.attr("href");switch(t("#buy_type").siblings(".tab-content").find(".tab-pane").removeClass("active"),t(i).addClass("active"),z.onToggleBuyType(s),s){case 1:t("#track_desc").addClass("hide"),t("#buy_mutiple_span").show();break;case 2:t("#buy_mutiple_span").hide(),t("#track_desc").removeClass("hide"),C(10);break;case 3:t("#track_desc").addClass("hide"),t("#buy_mutiple_span").show(),u()}}),t("#j-touzhu-tips").on("click",function(a){t("#j-touzhu-tipstext").toggle(),t(this).find(".icon").toggleClass("icon-bup").toggleClass("icon-bdown")}),t(".j-quick-method").on("click","[data-type]",function(e){e.preventDefault();var n=t(this).attr("data-type"),s=t("#j-area-"+z.playType+" .j-num-btn"),i=s.length;z.cleanNumBtn(),"all"===n&&s.addClass("active"),"odd"===n&&s.each(function(e,n){var s=Number(t(this).attr("data-num"));a.isNumber(s)&&s%2!==0&&t(this).addClass("active")}),"even"===n&&s.each(function(e,n){var s=Number(t(this).attr("data-num"));a.isNumber(s)&&s%2===0&&t(this).addClass("active")}),"big"===n&&s.each(function(e,n){var s=Number(t(this).attr("data-num")),o=10;18===i&&(o=9),a.isNumber(s)&&s>o&&t(this).addClass("active")}),"small"===n&&s.each(function(e,n){var s=Number(t(this).attr("data-num")),o=10;18===i&&(o=9),a.isNumber(s)&&o>=s&&t(this).addClass("active")}),z.updateMidTotal()}),t("#share-num").on("change",function(t){u()}),t("#part_buy").on("change",function(t){u()}),t("#commission_percent").on("change",function(a){var e=parseInt(t(this).val())||0,n=Math.floor(t("#part_buy_percent").html());e>n&&(t("#part_buy").val(Math.ceil(t("#commission_percent").val()/100*(t("#share-num").val()||0))),u())}),t("#has_part_aegis").on("change",function(a){t(this)[0].checked?t("#part_aegis_num").removeAttr("disabled"):(t("#part_aegis_num").attr("disabled","disabled"),t("#part_aegis_num").val(0),t("#part_aegis_percent").html("0.00")),u()}),t("#part_aegis_num").on("change",function(t){u()}),t(".br-set-group").on("click","a",function(a){t(this).parents(".br-set-group").find("a").removeClass("active"),t(this).toggleClass("active")}),t(".j-input-place").on("focus",function(a){i(t(this))}),t(".j-input-place").on("blur",function(a){o(t(this))}),t(".j-input-place").on("keyup",function(a){r(t(this))}),t("#is_end_zhongjiang").on("change",function(a){t(this)[0].checked?t("#track_stop_money").removeAttr("disabled"):(t("#track_stop_money").attr("disabled","disabled"),t("#part_aegis_num").val(0))}),c()});