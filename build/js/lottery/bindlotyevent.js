require.config({paths:{jquery:"../lib/jquery",lodash:"../lib/lodash.compat.min",bootstrap:"../lib/bootstrap.min",store:"../lib/store.min",app:"../common/app",lottery:"lottery"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"},lottery:{deps:["jquery","app","store"],exports:"lottery"}}}),require(["jquery","lodash","store","app","bootstrap"],function(a,t,e,i){"use strict";function n(t){a.trim(t.val())==t.attr("data-text")&&(t.parents("p").find(".j-btext-total").html(0),t.val(""))}function s(t){var e=t.attr("data-text");""==a.trim(t.val())&&(t.val(e),t.parents("p").find(".j-btext-total").html(e.length))}function l(a){var t=a.val().length,e=parseInt(a.attr("data-size"));e>=t?a.parents("p").find(".j-btext-total").html(t):(a.val(a.val().slice(0,e-1)),a.parents("p").find(".j-btext-total").html(e))}function o(){var a=null;return a=parseInt(y.box.find(".j-br-type .active").attr("data-buytype"))}function r(t,e){var n="",s="ssq"==e.lotyName?"双色球":"大乐透",l=o(),r=f.getZhuiJiaStatus();1===l?(n+="<p>"+s+' 第<span class="fc-3 mlr5">'+e.qihao+"</span>期</p>",n+='<p>共<span class="fc-3 mlr5">'+e.zhushu+'</span>注, 投注<span class="fc-3 mlr5">'+e.beishu+"</span>倍</p>"):2===l?n+='<p>追号<span class="fc-3 mlr5">'+e.qishu+"</span>期</p>":3===l?(n+="<p>"+s+' 第<span class="fc-3 mlr5">'+e.qihao+"</span>期</p>",n+='<p>方案总金额<span class="fc-3 mlr5">'+e.zhushu*e.beishu*r+".00</span>元</p>",n+='<p>您认购<span class="fc-3 mlr5">'+e.buyNum+'</span>份, 保底<span class="fc-3 mlr5">'+e.aegisNum+"</span>份</p>"):n+='<p>多期投注：共<span class="fc-3 mlr5">'+e.zhushu+'</span>注，<span class="fc-3 mlr5">'+e.beishu+'</span>倍，<span class="fc-3 mlr5">'+e.qishu+"</span>期</p>",n+='<p>本次需支付：<span class="fc-3 mlr5">'+y.payMoney+".00</span>元",i.checkLogin(y.payMoney,{enoughMoney:function(){i.showTips(t.confirmHtml),a("#buyConfirm").one("click",function(a){t.callback()})},lessMoneyTips:n})}1==a("#saleStatus").val()&&(i.showStopSellModal("ssq"==a("#lotyName").val()?"双色球":"大乐透"),a("#qiuck-sub,#buy-submit,#j-tuodan-sub,#j-upload-sub,#j-more-sub").html("暂停销售").removeClass("btn-red").addClass("btn-stop").attr("id","")),a("#j-touzhu-tips").on("click",function(t){a(this).toggleClass("active"),a("#j-touzhu-tipstext").toggle()});var u={},d={},h={},c={},m={},p={},b={},f={},v="",g="",y=function(){var t={maxBeiShu:9999,maxZhuShu:100,maxHang:100,maxQiShu:154,playType:"cgtz",lotyName:lotyName,payMoney:0,isZhuiJia:0,box:a("#senior .box-left").eq(0),init:function(){var t=this.maxQiShu;t=Number(a("#maxqishu").val()),this.maxQiShu=t=0==t?154:t,10>t&&(a("#j-more-qi").val(t),a("#j-more .j-more").eq(2).html(t),a("#j-more-total").html(4*t))}};return t}();y.init(),m.ballNum=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35"],m.ssq={redBall:m.ballNum.slice(0,33),blueBall:m.ballNum.slice(0,16),redMax:16,blueMax:16,redDanMax:5,redTuoMax:20,redTotal:6,blueTotal:1},m.dlt={redBall:m.ballNum.slice(0,35),blueBall:m.ballNum.slice(0,12),redMax:18,blueMax:16,redDanMax:4,redTuoMax:17,redTotal:5,blueTotal:2},b={frbox:'<div class="frbox"><img src="'+staticHostURI+'/front_images/fail.png" alt="success" class="icon"><div class="text"><p><%= lotyName%> 第<span><%= qihao%></span>期</p><p>共<span><%= zs %></span>注, 投注<span><%= bs %></span>倍</p><p>本次需支付<span class="fc-3"><%= total %>.00</span>元</p><div class="btns"><button class="btn btn-danger" id="buyConfirm">确定</button><button class="btn btn-gray" data-dismiss="modal">取消</button></div></div></div>',zhbox:'<div class="frbox"><img src="'+staticHostURI+'/front_images/fail.png" alt="success" class="icon"><div class="text"><p>追号<span><%= qs %></span>期</p><p>本次需支付<span class="fc-3"><%= total %>.00</span>元</p><div class="btns"><button class="btn btn-danger" id="buyConfirm">确定</button><button class="btn btn-gray" data-dismiss="modal">取消</button></div></div></div>',rgbox:'<div class="frbox"><img src="'+staticHostURI+'/front_images/fail.png" alt="success" class="icon"><div class="text"><p><%= lotyName%> 第<span><%= qihao%></span>期</p><p>方案总金额<span class="fc-3"><%= total %>.00</span>元</p><p>您认购<span><%= rengou %></span>份</p><p>共需支付<span class="fc-3"><%= rengou %>.00</span>元</p><div class="btns"><button class="btn btn-danger" id="buyConfirm">确定</button><button class="btn btn-gray" data-dismiss="modal">取消</button></div></div></div>',bdbox:'<div class="frbox"><img src="'+staticHostURI+'/front_images/fail.png" alt="success" class="icon"><div class="text"><p><%= lotyName%> 第<span><%= qihao%></span>期</p><p>方案总金额<span class="fc-3"><%= total %>.00</span>元</p><p>您认购<span><%= rengou %></span>份, 保底<span><%= baodi %></span>份</p><p>共需支付<span class="fc-3"><%= pay %>.00</span>元</p><div class="btns"><button class="btn btn-danger" id="buyConfirm">确定</button><button class="btn btn-gra2y" data-dismiss="modal">取消</button></div></div></div>'},u.a=function(a){try{return 1==a||2==a?a:a*u.a(a-1)}catch(t){alert(t)}},u.getACTotalNum=function(a,t,e){if(a==t)return 1;if(t>a)return 0;t=2*t>a?a-t:t;var i=u.a(a)/u.a(a-t);return"A"===e?i:"C"===e?i/u.a(t):0},d.getAlertHtml=function(a){var e="",i="",n="ssq"==a.lotyName?"双色球":"大乐透",s=!1,l=0,o="",r={},u="",d=f.getZhuiJiaStatus(),h=a.zhuihaoqihao?!0:!1;if(s=1==a.qishu?!1:!0)o=b.zhbox,u=a.zhushu*d*a.beishu*a.qishu,r={qs:a.qishu,total:u};else if(a.shareNum)if(0!=a.baodiText){o=b.bdbox;var c=a.zhushu*d*a.beishu;u=c/a.shareNum*(a.buyNum+a.aegisNum),r={lotyName:n,qihao:a.qihao,rengou:a.buyNum,baodi:a.aegisNum,total:c,pay:u}}else o=b.rgbox,u=a.rengouMoney,r={lotyName:n,qihao:a.qihao,rengou:a.rengouMoney,total:a.zhushu*d*a.beishu};else o=b.frbox,u=a.zhushu*d*a.beishu,r={lotyName:n,zs:a.zhushu,bs:a.beishu,qihao:a.qihao,total:u};if(h){o=b.zhbox;for(var m=0;m<a.zhuihaoqihao.length;m++)l+=Number(a.zhuihaoqihao[m].split("|")[2]);u=a.zhushu*d*l,r={qs:a.qishu,total:u}}return y.lotyName=a.lotyName,y.payMoney=u,e=t.template(o),i=e(r)},d.onSubmitDone=function(a,t,n,s){if(1e5==a){var l="ssq"==y.lotyName?"双色球":"大乐透";e.set("lotyName",y.lotyName),e.set("lotyCNName",l),e.set("payMoney",y.payMoney),e.set("projectNo",n),e.set("trackId",s),window.location.href="/html/lottery/trade/success.html"}else i.handRetCode(a,t)},d.onSubmitFail=function(a,t){e.set("lotyName",y.lotyName),window.location.href="/html/lottery/trade/fail.html"},d.checkParamsStatus=function(a,t){var e=1;return 0==a.zhushu&&(i.showTips("请至少选择1注号码投注"),e=0),t.isCheck||(i.showTips("请先阅读并同意《委托投注规则》后才能继续"),e=0),a.zhuihaoqihao&&0==a.zhuihaoqihao&&(i.showTips("请至少选择1注号码投注"),e=0),e},d.getCommonParams=function(){var t=function(){var t=y.box,e={lotyName:a("#lotyName").val(),playName:a("#playName").val(),qihaoId:a("#qihaoId").val(),qihao:a("#qihao").val(),zhushu:Number(t.find(".j-quick-zhu").html()),beishu:Number(t.find(".j-quick-bei").val()),qishu:1,codes:d.formarFormSub(t.find(".br-gou .br-zhu-item")),unikey:(new Date).valueOf()};return y.box.find(".j-zj-check")[0]&&(e.isZhuiJia=y.box.find(".j-zj-check")[0].checked),e}();return t},d.sortNum=function(a){return a.sort(function(a,t){return a-t})},d.clearAllBallActive=function(a){a.find(".active").removeClass("active")},d.randomNum=function(a,e,i){var n=parseInt(i),s=t.sample(m[y.lotyName][e],n);a.find(".active").removeClass("active");for(var l=0;l<s.length;l++)a.find("li").eq(s[l]-1).addClass("active")},d.updateCount=function(a,t){var e=parseInt(a.val(),10);1==t?e++:e--,e=e>=1?e:1,a.val(e)},d.getManyZhu=function(a){for(var e="",i=0;a>i;i++){var n=d.sortNum(t.sample(m[y.lotyName].redBall,m[y.lotyName].redTotal)),s=d.sortNum(t.sample(m[y.lotyName].blueBall,m[y.lotyName].blueTotal));e+=this.getOneZhu(n,s)}return e},d.updateTotalZhu=function(a){var t=y.box,e=0;t.find(".money").each(function(a,t){e+=parseInt(t.attributes["data-m"].value)}),t.find(".j-quick-zhu").html(e),d.setZhuTotal()},d.getBoxLeft=function(a){return a[0]?a.hasClass(".box-left")?a:a.parents(".box-left"):void 0},d.setZhuTotal=function(){var t=y.box,e=f.getZhuiJiaStatus(),i=a("#quick").hasClass("hidden"),n=[],s=0;"dqtz"!==y.playType?(n.push(parseInt(t.find(".j-quick-zhu").html())),n.push(parseInt(t.find(".j-quick-bei").val())),n.push(parseInt(t.find(".j-quick-qi").val())),s=n[0]*n[1]*n[2]*e,t.find(".j-quick-total").html(s)):(n.push(parseInt(a("#j-more-zhu").val())),n.push(parseInt(a("#j-more-bei").val())),n.push(parseInt(a("#j-more-qi").val())),a("#j-more .j-more").each(function(a,t){t.innerHTML=n[a]}),s=n[0]*n[1]*n[2]*e,a("#j-more-total").html(s)),i&&(p.setZhuiHaoTotal(t),p.setHeMaiTotal())},d.checkBallGroup=function(){var a=y.box,t=f.getZhuiJiaStatus(),e=parseInt(a.find(".j-ball-red .active").length),i=parseInt(a.find(".j-ball-blue .active").length),n=0,s=0,l=0;e>=m[y.lotyName].redTotal&&i>=m[y.lotyName].blueTotal?(n=u.getACTotalNum(e,m[y.lotyName].redTotal,"C"),s=u.getACTotalNum(i,m[y.lotyName].blueTotal,"C"),l=n*s,d.updateAddBtn(!0)):d.updateAddBtn(!1),d.updateQuickZhu(e,i,l,l*t,a)},d.getOneZhu=function(a,t,e,i){var n="",s=f.getZhuiJiaStatus();e/=s,i||(n+='<div class="br-zhu-item clearfix">'),n+='<b>[快捷投注]</b><div class="list">';for(var l=0;l<a.length;l++)n+='<span data-c="0">'+a[l]+"</span>";for(var l=0;l<t.length;l++)n+='<span class="fc-5" data-c="1">'+t[l]+"</span>";return n+="</div>",n+=e?'<div class="pull-right"><b><i class="money" data-m="'+e+'">'+e*s+"</i>元</b>":'<div class="pull-right"><b><i class="money" data-m="1">'+s+"</i>元</b>",n+='<a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div>',i||(n+="</div>"),n},d.createOneZhuBall=function(t,e,i){var n=0,s=0;d.clearAllBallActive(i);for(var l=0;l<t.length;l++)n=parseInt(t[l])-1,i.find(".j-ball-red li").eq(n).addClass("active");for(var l=0;l<e.length;l++)s=parseInt(e[l])-1,i.find(".j-ball-blue li").eq(s).addClass("active");d.checkBallGroup(a(this))},d.formarFormSub=function(a){for(var t=[],e=0;e<a.length;e++){for(var i=[],n=[],s=a.eq(e),l=0;l<s.find("span").length;l++){var o=s.find("span").eq(l).html();1==s.find("span").eq(l).attr("data-c")?n.push(o):i.push(o)}t.push(i.join(",")+"|"+n.join(","))}return t.join("$")},d.updateQuickZhu=function(a,t,e,i,n){n.find(".j-quick-hd-qnum").html(a),n.find(".j-quick-hd-hnum").html(t),n.find(".j-quick-hd-zhu").html(e),n.find(".j-quick-hd-total").html(i)},d.getItemNum=function(a){var t={red:[],blue:[]};return a.find("span").each(function(a,e){e.className?t.blue.push(e.innerHTML):t.red.push(e.innerHTML)}),t},d.tuodanFormarFormSub=function(a){for(var t=[],e=0;e<a.length;e++){for(var i=[],n=[],s=[],l=[],o=a.eq(e),r=o.find("span"),u=0;u<r.length;u++){var d=r.eq(u).html(),h=parseInt(r.eq(u).attr("data-s"));switch(h){case 0:i.push(d);break;case 1:s.push(d);break;case 2:n.push(d);break;case 3:l.push(d)}}t.push("dlt"==lotyName?0==n.length?i.join(",")+"@"+s.join(",")+"|"+l.join(","):i.join(",")+"@"+s.join(",")+"|"+n.join(",")+"@"+l.join(","):i.join(",")+"@"+s.join(",")+"|"+l.join(","))}return t.join("$")},c.getTuodanNum=function(a){var t=[];return a.find("a.active").each(function(a,e){t.push(e.innerHTML)}),t},c.createOneTuodanBall=function(a,t){var e="";d.clearAllBallActive(t);for(var i=0;i<a.length;i++)e=parseInt(a[i])-1,t.find("a").eq(e).addClass("active")},d.updateAddBtn=function(a,t){var e=y.box.find(".j-add-btn,.j-add-btn-2");a?e.addClass("active"):e.removeClass("active"),t&&e.find("span").html(t)},c.checkBallAear=function(){var a=c.getTuodanBallZhu();d.updateAddBtn(a.total?!0:!1),c.updateTuoTips(a)},c.randomTuodanNum=function(a,e,i){for(var n=m[y.lotyName][e+"Ball"].concat(),s=0;s<a.length;s++)n=t.without(n,a[s]);return t.sample(n,i)},c.getTuodanBallZhu=function(){var t={},e=0,i=0;t.rDan=a('.m-num-group-red[data-dan="1"]'),t.rTuo=a('.m-num-group-red[data-dan="0"]'),t.bDan=a('.m-num-group-blue[data-dan="1"]'),t.bTuo=a('.m-num-group-blue[data-dan="0"]'),t.rDaned=t.rDan.find(".active"),t.rTuoed=t.rTuo.find(".active"),t.bDaned=t.bDan.find(".active"),t.bTuoed=t.bTuo.find(".active"),t.rDans=t.rDan.find(".active").length,t.rTuos=t.rTuo.find(".active").length,t.bDans=t.bDan.find(".active").length,t.bTuos=t.bTuo.find(".active").length,t.code=0,t.total=0;var n=t.rDans+t.rTuos,s=t.bDans+t.bTuos;return 0==t.rDans?t.code=-1:n>=m[y.lotyName].redTotal&&s>=m[y.lotyName].blueTotal?(e=u.getACTotalNum(t.rTuos,m[y.lotyName].redTotal-t.rDans,"C"),i="dlt"==lotyName?1==t.bDans?t.bTuos:u.getACTotalNum(t.bTuos,2,"C"):t.bTuos,t.total=e*i,t.code=1):t.code=-2,t},c.addOneTuoZhu=function(a,t,e,i,n,s){var l="",o=f.getZhuiJiaStatus();n/=o,s||(l+='<div class="br-zhu-item clearfix">'),l+='<b>[快捷投注]</b><div class="list">',a.length>0&&(l+="(");for(var r=0;r<a.length;r++)l+='<span data-s="0">'+a[r].innerHTML+"</span>";a.length>0&&(l+=")");for(var r=0;r<t.length;r++)l+='<span data-s="1">'+t[r].innerHTML+"</span>";e.length>0&&(l+='<span class="fc-5">(</span>');for(var r=0;r<e.length;r++)l+='<span class="fc-5" data-s="2">'+e[r].innerHTML+"</span>";e.length>0&&(l+='<span class="fc-5">)</span>');for(var r=0;r<i.length;r++)l+='<span class="fc-5" data-s="3">'+i[r].innerHTML+"</span>";return l+="</div>",l+=n?'<div class="pull-right"><b><i class="money" data-m="'+n+'">'+o*n+"</i>元</b>":'<div class="pull-right"><b><i class="money" data-m="'+n+'">'+o+"</i>元</b>",l+='<a href="javascript:;" class="br-zhu-set">修改</a><a href="javascript:;" class="br-zhu-del">删除</a></div>',s||(l+="</div>"),l},c.updateTuoTips=function(t){var e="",i=f.getZhuiJiaStatus();e="dlt"==lotyName?'您选择了<span id="numtuo1">'+(t.rDans+t.rTuos)+'</span>个红球（<span id="numtuo2">'+t.rDans+'</span>个胆码，<span id="numtuo3">'+t.rTuos+'</span>个拖码），<span id="numtuo4">'+(t.bDans+t.bTuos)+'</span>个蓝球（<span id="numtuo5">'+t.bDans+'</span>个胆码，<span id="numtuo6">'+t.bTuos+'</span>个拖码）， 共 <span id = "numtuo7"> '+t.total+' </span>注，共<span class="fc-3" id="numtuo8">'+t.total*i+"</span > 元 ":'您选择了<span id="numtuo1">'+(t.rDans+t.rTuos)+'</span>个红球（<span id="numtuo2">'+t.rDans+'</span>个胆码，<span id="numtuo3">'+t.rTuos+'</span>个拖码），<span id="numtuo4">'+t.bTuos+'</span>个蓝球（<span id="numtuo5">0</span>个胆码，<span id="numtuo6">0</span>个拖码）， 共 <span id = "numtuo7"> '+t.total+' </span>注，共<span class="fc-3" id="numtuo8">'+t.total*i+"</span > 元 ",a("#j-tuo-mintips").html(e)},c.getOneListNums=function(a){var t={rd:[],rt:[],dd:[],dt:[]},e="";e="dlt"==lotyName?["rd","rt","dd","dt"]:["rd","rt","dt","dd"];for(var i=0;4>i;i++)a.find('span[data-s="'+i+'"]').each(function(a,n){t[e[i]].push(n.innerHTML)});return t},h.totalSdNums=function(){var t=a.trim(a("#sd_number").val()),e=0,i=f.getZhuiJiaStatus();""!==t&&(e=t.split(/\n/g).length),a("#sd-tip-zhu").html(e),a("#sd-tip-total").html(e*i),d.updateAddBtn(e?!0:!1)},h.getListHTML=function(a,t,e,i){var n="",s=f.getZhuiJiaStatus();e/=s,a=d.sortNum(a),t=d.sortNum(t),i||(n+='<div class="br-zhu-item clearfix">'),n+='<b>[单式上传]</b><div class="list">';for(var l=0;l<a.length;l++)n+='<span data-c="0">'+a[l]+"</span>";for(var l=0;l<t.length;l++)n+='<span data-c="1" class="fc-5">'+t[l]+"</span>";return n+="</div>",n+=e?'<div class="pull-right"><b><i class="money" data-m="'+e+'">'+e*s+"</i>元</b>":'<div class="pull-right"><b><i class="money" data-m="'+e+'">'+s+"</i>元</b>",n+='<a href="javascript:;" class="br-zhu-del">删除</a></div>',i||(n+="</div>"),n},h.setSdTotal=function(){var t=0,e=f.getZhuiJiaStatus();a("#sd-list").find(".money").each(function(a,e){t+=parseInt(e.innerHTML)}),a("#sd-tip-zhu2").html(t/e),a("#sd-tip-total2").html(t)},h.relovStr=function(a){var e="",i=[];return e=a.split(a.indexOf("+")>=0?/\+/g:/\|/g),i.push(t.uniq(e[0].split(","))),i.push(t.uniq(e[1].split(","))),i},h.checkSdZhu=function(a,e){var i="",n="",s="";e?(i=m[y.lotyName].blueBall,n=m[y.lotyName].blueMax,s=m[y.lotyName].blueTotal):(i=m[y.lotyName].redBall,n=m[y.lotyName].redMax,s=m[y.lotyName].redTotal);var l=a.split(","),o=l.length;if(o>=s&&n>=o&&t.uniq(l).length==o){for(var r=0;r<l.length;r++)if(!t.find(i,function(a){return a==l[r]}))return!1;return!0}return!1},h.sdFormat=function(a){var t={},e="",i=0,n=0,s=0,l=0,o=0,r=f.getZhuiJiaStatus();t.code=0,t.good=[],t.bad=[],t.moneyArr=[],t.overMaxMoney=!1,t.all=a.split(/\n/g);for(var d=0;d<t.all.length;d++)t.all[d].indexOf("+")>=0||t.all[d].indexOf("|")>=0?(e=t.all[d].split(t.all[d].indexOf("+")>=0?/\+/g:/\|/g),2==e.length&&h.checkSdZhu(e[0],0)&&h.checkSdZhu(e[1],1)?(i=e[0].split(",").length,n=e[1].split(",").length,l=u.getACTotalNum(i,m[y.lotyName].redTotal,"C"),o=u.getACTotalNum(n,m[y.lotyName].blueTotal,"C"),s=l*o*r,s>2e4?(t.bad.push(t.all[d]),t.overMaxMoney=!0):(t.good.push(t.all[d]),t.moneyArr.push(s))):t.bad.push(t.all[d])):t.bad.push(t.all[d]);return 0==t.bad.length&&(t.code=1),t},p.getNewHtml=function(t){var e=parseInt(y.box.find(".zh_issue_num").val());e=10>e?10:e,a.ajax({url:"/lottery/digital/query-track-issue/"+lotyName,type:"get",dataType:"json",data:{num:e}}).done(function(a){if(a){for(var e="",i=a.retData,n=0;n<i.length;n++)e+="<tr><td>"+(n+1)+'</td><td><input type="checkbox" class="br-zhui-c" data-qihaoId="'+i[n].id+'" data-qi="'+i[n].qihao+'" checked>'+i[n].qihao+'期</td><td><input type="text" class="br-input br-zhui-bei" value="1">倍</td><td><span class="j-money">10</span>元</td><td>'+i[n].awardTime.slice(0,10)+'<span class="ml15">'+i[n].awardTime.slice(10)+"</span></td></tr>";var s=t.parents(".br-details").find(".br-zhui");s.find(".br-zhui-list tbody").html(e),p.bindZhuiHaoEvent(),p.setZhuiHaoTotal(y.box)}}).fail(function(){i.onServiceFail()})},p.updateHemai=function(a,t,e,i,n,s,l){var o=y.box,r=l*t||0,u=(e+l)*t||0;0===a&&(t=0),o.find(".j-share-num").val(a),o.find(".j-unit-price").html(t),o.find(".j-rengou").val(e),o.find(".j-rengou-percentage").html(n),o.find(".j-baodi-text").val(l),o.find(".j-baodi-percent").html(s),o.find(".j-rengou-tip").html(e*t),o.find(".j-baidi-tip").html(r),o.find(".j-totalm-tip").html(u)},y.hemaiTotalMoney=0,p.setHeMaiTotal=function(){var a=y.box;if("dqtz"!==y.playType){var t=1*a.find(".j-quick-total").html(),e=a.find(".j-share-num").val()||0,i="",n="",s=a.find(".j-rengou").val(),l="",o=1*a.find(".br-select").val()||0,r="",u="",d=parseInt(a.find(".j-baodi-text").val())||0,h=!1;if(e=Number(e.replace(/[^0-9]/g,"")),s=Number(s.replace(/[^0-9]/g,"")),y.hemaiTotalMoney!==t&&(y.hemaiTotalMoney=t,e=t),0===t)return void p.updateHemai(0,o,0,0,0,0,0);t%e===0?i=t/e:(i=1,e=t),0>=s&&(s=1),s>e&&(s=e),o>s/e*100&&(s=Math.ceil(e*o*.01)),n=s*i,a.find(".j-baodi-check")[0]&&(h=a.find(".j-baodi-check")[0].checked),h?(a.find(".j-baodi-text")[0].disabled=!1,r=0===d?.8>s/e?Math.ceil(.2*e):e-s:e>d+s?.2>d/e?Math.ceil(.2*e)+s>e?e-s:Math.ceil(.2*e):d:e-s,u=(r/e*100).toFixed(2)):(a.find(".j-baodi-text")[0].disabled=!0,r=0,u="0.00"),l=0===t?0:(s/e*100).toFixed(2),p.updateHemai(e,i,s,o,l,u,r)}},p.bindZhuiHaoEvent=function(){a(".br-details thead .br-zhui-c").on("change",function(t){var e=a(this)[0].checked;a(this).parents(".br-details").find("tbody .br-zhui-c").each(function(a,t){t.checked=e}),p.setZhuiHaoTotal(y.box)}),a(".br-details tbody .br-zhui-c").on("change",function(a){p.setZhuiHaoTotal(y.box)}),a(".br-details thead .br-zhui-bei").on("change",function(t){var e=parseInt(a(this).val())||1;e=isNaN(e)?1:1>e?1:Math.ceil(e),e>9999&&(e=9999),a(this).val(e),a(this).parents(".br-details").find("tbody .br-zhui-bei").val(e),p.setZhuiHaoTotal(y.box)}),a(".br-details tbody .br-zhui-bei").on("change",function(t){var e=parseInt(a(this).val())||1;e=isNaN(e)?1:1>e?1:Math.ceil(e),e>9999&&(e=9999),a(this).val(e),p.setZhuiHaoTotal(y.box)}),a(".br-details .end_min_money").on("change",function(t){var e=parseInt(a(this).val())||1;e=isNaN(e)?1:1>e?1:Math.ceil(e),a(this).val(e)})},p.bindHeMaiEvent=function(){a(".j-rengou,.j-share-num,.br-select,.j-baodi-check,.j-baodi-text").on("change",function(a){p.setHeMaiTotal()}),a(".br-textarea,.j-project-title").on("focus",function(t){n(a(this))}),a(".br-textarea,.j-project-title").on("blur",function(t){s(a(this))}),a(".br-textarea,.j-project-title").on("keyup",function(t){l(a(this))})},p.setZhuiHaoTotal=function(a){var t=1*a.find(".j-quick-total").html();a.find(".br-details tbody .br-zhui-bei").each(function(e,i){a.find(".br-details tbody .j-money")[e].innerHTML=i.value*t});var e=a.find(".br-details tbody .br-zhui-c:checked"),i=0;a.find(".br-details tbody .br-zhui-c:checked").parents("tr").find(".j-money").each(function(a,t){i+=parseInt(t.innerHTML)}),a.find(".j-qi-count").html(e.length),a.find(".j-qi-money").html(i)},f.updateZhuList=function(a){var t=(y.isZhuiJia,f.getZhuiJiaStatus()),e=0;y.box.find(".br-zhu-l .money").each(function(a,i){e=i.attributes["data-m"].value,i.innerHTML=t*e}),d.checkBallGroup(y.box),d.setZhuTotal(),"ztsc"===y.playType&&(h.setSdTotal(),h.totalSdNums()),"tdtz"===y.playType&&c.checkBallAear()},f.getZhuiJiaStatus=function(){return y.isZhuiJia=y.box.find(".j-zj-check")[0]?y.box.find(".j-zj-check")[0].checked:!1,y.isZhuiJia?3:2},a(".br-count-item").on("click",".j-count",function(t){t.preventDefault();{var e=a(this).siblings(".btn-results"),i=a(this).attr("data-c");e.attr("data-r")}if(d.updateCount(e,i),e.hasClass("j-quick-bei")){var n=parseInt(e.val())||1;n>y.maxBeiShu&&e.val(y.maxBeiShu),0>=n&&e.val(1)}if(e.hasClass("j-quick-qi")){var n=parseInt(e.val())||1;n>y.maxQiShu&&e.val(y.maxQiShu),0>=n&&e.val(1)}if(e.hasClass("j-quick-zhu")){var n=parseInt(e.val())||1;n>y.maxZhuShu&&e.val(y.maxZhuShu),0>=n&&e.val(1)}d.setZhuTotal()}),a(".btn-results").on("change",function(t){var e=(a(this).attr("data-r"),parseInt(a(this).val(),10));if(isNaN(e)?a(this).val(1):(e=e>=1?e:1,a(this).val(e)),a(this).hasClass("j-quick-bei")){var i=parseInt(a(this).val())||1;i>y.maxBeiShu&&a(this).val(y.maxBeiShu),0>=i&&a(this).val(1)}if(a(this).hasClass("j-quick-qi")){var i=parseInt(a(this).val())||1;i>y.maxQiShu&&a(this).val(y.maxQiShu),0>=i&&a(this).val(1)}if(a(this).hasClass("j-quick-zhu")){var i=parseInt(a(this).val())||1;i>y.maxZhuShu&&a(this).val(y.maxZhuShu),0>=i&&a(this).val(1)}d.setZhuTotal()}),a(".j-zj-check").on("change",function(t){y.isZhuiJia=a(this)[0].checked,f.updateZhuList(y.box),p.setHeMaiTotal()}),a(".j-add-btn").on("click",function(t){var e=parseInt(a(this).attr("data-add")),n=a(this).hasClass("active"),s=a(this).parents(".br-gou").siblings(".m-num-title").find(".j-quick-hd-total").html(),l="",o=[],r=[],u=["请先选择号码","至少选择"+m[y.lotyName].redTotal+"个红球和"+m[y.lotyName].blueTotal+"个蓝球","您好，单个投注的金额应小于2万元，请返回重新选择"],h=y.box.find(".j-ball-red .active"),c=y.box.find(".j-ball-blue .active"),p=y.box.find(".j-layout-select .active");return parseInt(s)>2e4?void i.showTips(u[2]):y.box.find(".br-zhu-item").length>=y.maxHang?void i.showTips("您的投注号码多于100行，请返回重新选择"):(1==e&&(n?(h.each(function(t,e){var i=a.trim(a(this).text());o.push(i)}),c.each(function(t,e){var i=a.trim(a(this).text());r.push(i)}),o.length>=m[y.lotyName].redTotal&&r.length>=m[y.lotyName].blueTotal?(p.removeClass("active"),l=d.getOneZhu(o,r,s),y.box.find(".br-zhu-l").append(l),d.checkBallGroup(a(this))):i.showTips(u[1])):i.showTips(p.length>0?u[1]:u[0])),0==e&&(n?(h.each(function(a,t){var e=t.getElementsByTagName("span")[0].innerHTML;o.push(e)}),c.each(function(a,t){var e=t.getElementsByTagName("span")[0].innerHTML;r.push(e)}),o.length>=m[y.lotyName].redTotal&&r.length>=m[y.lotyName].blueTotal?(p.removeClass("active"),l=d.getOneZhu(o,r,s,!0),v.html(l),d.checkBallGroup(a(this)),a(this).attr("data-add",1),a(this).find("span").html("添加到投注列表")):i.showTips(u[1])):i.showTips(u[0])),void d.updateTotalZhu(a(this)))}),a(".j-br-zhu").on("click",".br-zhu-item",function(t){var e=a(this).parents(".br-gou").siblings(".layout_select"),i=d.getItemNum(a(this)),n=e.siblings(".m-num-title");"A"!==t.target.tagName&&(a(this).siblings(".br-zhu-item").removeClass("active"),a(this).addClass("active"),d.clearAllBallActive(e),v=a(this),d.createOneZhuBall(i.red,i.blue,e),d.checkBallGroup(n))}),a(".j-br-zhu").on("click",".br-zhu-set",function(t){var e=a(this).parents(".br-zhu-item"),i=a(this).parents(".br-zhu").find(".br-zhu-item"),n=d.getItemNum(e),s=a(this).parents(".br-gou"),l="修改投注号码",o=s.siblings(".layout_select"),r=o.siblings(".m-num-title");i.removeClass("active"),e.addClass("active"),d.updateAddBtn(!0,l),y.box.find(".j-add-btn").addClass("active").attr("data-add",0),v=e,d.createOneZhuBall(n.red,n.blue,o),d.checkBallGroup(r)}),a(".jxredball").on("click",function(t){var e=y.box.find(".jxRedBall_Num").val(),i=y.box.find(".j-ball-red");d.randomNum(i,"redBall",e),d.checkBallGroup(a(this))}),a(".jxblueball").on("click",function(t){var e=y.box.find(".jxBlueBall_Num").val(),i=y.box.find(".j-ball-blue");d.randomNum(i,"blueBall",e),d.checkBallGroup(a(this))}),a(".ball-group").on("click","li",function(t){var e=y.box.find(".j-ball-red"),n=e.find(".active");a(this).parents(".j-ball-red").length?n.length<=m[y.lotyName].redMax?n.length==m[y.lotyName].redMax?a(this).hasClass("active")?(a(this).removeClass("active"),d.checkBallGroup(a(this))):(i.showTips("最多只能选择"+m[y.lotyName].redMax+"个红球"),d.checkBallGroup(a(this))):(a(this).toggleClass("active"),d.checkBallGroup(a(this)),e.find(".active").length==m[y.lotyName].redMax&&i.showTips("已经达到最大投注个数")):i.showTips("最多只能选择"+m[y.lotyName].redMax+"个红球"):(a(this).toggleClass("active"),d.checkBallGroup(a(this)))}),a(".clearredball").on("click",function(t){y.box.find(".j-ball-red .active").removeClass("active"),d.checkBallGroup(a(this))}),a(".clearblueball").on("click",function(t){y.box.find(".j-ball-blue .active").removeClass("active"),d.checkBallGroup(a(this))}),a(".j-br-zhu").on("click",".br-zhu-del",function(t){var e=a(this).parents(".br-zhu");a(this).parents(".br-zhu-item").remove(),a(".j-add-btn").attr("data-add",1),a(".j-add-btn").find("span").html("添加到投注列表"),d.updateTotalZhu(e)}),a(".j-zhu-adds").on("click",function(t){var e=y.box,n=parseInt(a(this).attr("data-zhu")),s=d.getManyZhu(n),l=parseInt(e.find(".br-zhu-item").length);return l+n<=y.maxHang?(e.find(".br-zhu-l").append(s),void d.updateTotalZhu(a(this))):void i.showTips("您的投注号码多于100行，请返回重新选择")}),a(".j-zhu-clean").on("click",function(t){a(this).parents(".br-zhu-r").siblings(".br-zhu-l").html(""),d.updateTotalZhu(a(this))}),a(".m-num-group-red").on("click","a",function(t){var e=a(this).index(),n=".m-num-group-red",s=a(this).parents(n),l=m[y.lotyName].redDanMax,o=m[y.lotyName].redTuoMax,r=s.attr("data-dan"),u=s.find(".active").length;1==r?l>u?(s.siblings(n).find("a").eq(e).removeClass("active"),a(this).toggleClass("active")):u==l&&a(this).hasClass("active")?a(this).toggleClass("active"):i.showTips("最多只能有"+l+"个胆码"):o>u?(s.siblings(n).find("a").eq(e).removeClass("active"),a(this).toggleClass("active")):u==o&&a(this).hasClass("active")?a(this).toggleClass("active"):i.showTips("最多只能有"+o+"个拖码"),c.checkBallAear()}),a(".j-random-tuo").on("click",function(t){var e=a(this),i=".m-num-group",n=e.parents(i),s=n.siblings(i),l=c.getTuodanNum(s),o=e.attr("data-color"),r=n.find(".tuo-select").val(),u="";u=c.randomTuodanNum(l,o,r),c.createOneTuodanBall(u,n),c.checkBallAear()}),a(".m-num-group").on("click",".m-num-clean",function(t){a(this).parents(".m-num-group").find("a.active").removeClass("active"),c.checkBallAear(),d.setZhuTotal()}),a("#j-tuo-zhu").on("click",".br-zhu-del",function(t){var e=a(this).parents(".br-zhu");a(this).parents(".br-zhu-item").remove(),a("#tuo-sub").attr("data-add",1),a("#tuo-sub").find("span").html("添加到投注列表"),d.updateTotalZhu(e)}),a("#tuo-sub").on("click",function(t){var e="",n=c.getTuodanBallZhu(),s=a(this).parents(".br-gou"),l=["前区胆码至少选择一个","您选的方案不足一注","您好，单个投注的金额应小于2万元，请返回重新选择"],o=a(this).attr("data-add"),r=f.getZhuiJiaStatus();return 2*n.total>2e4?void i.showTips(l[2]):y.box.find(".br-zhu-item").length>=y.maxHang?void i.showTips("您的投注号码多于100行，请返回重新选择"):-1===n.code?void i.showTips(l[0]):-2===n.code?void i.showTips(l[1]):n.code>0?"1"==o?(e=c.addOneTuoZhu(n.rDaned,n.rTuoed,n.bDaned,n.bTuoed,n.total*r),s.find(".br-zhu-l").append(e),d.updateTotalZhu(a(this)),d.setZhuTotal(),d.clearAllBallActive(a(".m-num-group")),void c.checkBallAear()):(e=c.addOneTuoZhu(n.rDaned,n.rTuoed,n.bDaned,n.bTuoed,n.total*r,!0),g.html(e),d.updateTotalZhu(a(this)),d.setZhuTotal(),d.clearAllBallActive(a(".m-num-group")),c.checkBallAear(),a(this).attr("data-add",1),void a(this).find("span").html("添加到投注列表")):void 0}),a("#j-tuo-zhu").on("click",".br-zhu-set",function(t){var e=a(this).parents(".br-zhu-item"),i=a(this).parents(".br-gou"),n=(y.box,c.getOneListNums(e)),s=a("#j-tuo-mintips"),l=["rd","rt","dd","dt"],o=y.box.find(".m-num-group"),r="";e.siblings(".br-zhu-item").removeClass("active"),e.addClass("active"),i.find("#tuo-sub").find("span").html("修改投注号码"),i.find("#tuo-sub").addClass("active").attr("data-add",0),g=e,d.clearAllBallActive(o);for(var u=0;u<o.length;u++)for(var h=0;h<n[l[u]].length;h++)r=parseInt(n[l[u]][h])-1,o.eq(u).find("a").eq(r).addClass("active");c.checkBallAear(s)}),a(".m-num-group-blue").on("click","a",function(t){var e=a(this).index(),n=".m-num-group-blue",s=a(this).parents(n),l=parseInt(s.attr("data-max")),o=s.attr("data-dan"),r=s.find(".active").length;1==o?l>r?(s.siblings(n).find("a").eq(e).removeClass("active"),a(this).toggleClass("active")):r==l&&a(this).hasClass("active")?a(this).toggleClass("active"):"dlt"==lotyName&&i.showTips("最多只能有1个胆码"):(s.siblings(n).find("a").eq(e).removeClass("active"),a(this).toggleClass("active")),c.checkBallAear()}),a("#j-tuo-zhu").on("click",".br-zhu-item",function(t){var e=a(this).parents(".br-gou").siblings(".layout_select,.dt_layout_select"),i=c.getOneListNums(a(this)),n=a("#j-tuo-mintips"),s="",l="",o="";if("dlt"==lotyName&&(s=["rd","rt","dd","dt"],l=e.find(".m-num-group")),"A"!==t.target.tagName){if(a(this).siblings(".br-zhu-item").removeClass("active"),a(this).addClass("active"),d.clearAllBallActive(e),g=a(this),d.clearAllBallActive(e),"dlt"==lotyName)for(var r=0;r<l.length;r++)for(var u=0;u<i[s[r]].length;u++)o=parseInt(i[s[r]][u])-1,l.eq(r).find("a").eq(o).addClass("active");else{for(var r=0;r<i.rd.length;r++)o=parseInt(i.rd[r])-1,a('.m-num-group-red[data-dan="1"]').find("a").eq(o).addClass("active");for(var r=0;r<i.rt.length;r++)o=parseInt(i.rt[r])-1,a('.m-num-group-red[data-dan="0"]').find("a").eq(o).addClass("active");for(var r=0;r<i.dd.length;r++)o=parseInt(i.dd[r])-1,a('.m-num-group-blue[data-dan="0"]').find("a").eq(o).addClass("active")}c.checkBallAear(n)}});var j="",x=!0;a("#sd_number").on("blur",function(t){t.preventDefault();var e=a.trim(a(this).val());""===e&&a("#j-textarea-mask").show()}),a("#sd_sub").on("click",function(e){{var n=a(this),s=a.trim(a("#sd_number").val()),l="",o="",r="",u=["<h5>请按照正确的格式填写：</h5><p>单式：01,02,03,04,05,06+01</p><p>复式：01,02,03,04,05,06,07,08+01,02</p>","请输入投注号码","您的投注号码多于"+y.maxHang+"行，请返回重新选择","您好，单个投注的金额应小于2万元，请返回重新选择"],d=y.box.find(".br-zhu-item").length,c=0;f.getZhuiJiaStatus()}if(n.hasClass("active")){if("dlt"==lotyName&&(u[0]="<h5>请按照正确的格式填写：</h5><p>单式：01,02,03,04,05+01,02</p><p>复式：01,02,03,04,05,06,07+01,02,03</p>"),y.box.find(".br-zhu-item").length>=y.maxHang)return void i.showTips(u[2]);if(t.isEmpty(s))return void i.showTips(u[1]);if(l=h.sdFormat(s),c=l.good.length,l.overMaxMoney)return void i.showTips(u[3]);if(d+c>y.maxHang)return void i.showTips(u[2]);l&&0==l.code&&i.showTips(u[0]);for(var m=0;m<l.good.length;m++)o=h.relovStr(l.good[m]),r+=h.getListHTML(o[0],o[1],l.moneyArr[m]);if(a("#sd-list").append(r),h.setSdTotal(),l.bad.length>0){a("#sd_number").val("");for(var m=0;m<l.bad.length;m++)l.bad[m]&&a("#sd_number").val(a("#sd_number").val()+l.bad[m]+"\n")}else a("#sd_number").val("");h.totalSdNums(),p.setHeMaiTotal()}}),a("#j-textarea-mask").on("click",function(t){a(this).hide(),a("#sd_number")[0].focus()}),a("#sd_number").on("focus",function(t){x&&(j=a(this).val(),a(this).val(""),x=!1),a(this).addClass("focus")}),a("#sd_number").on("keyup blur",function(a){h.totalSdNums()}),a("#sd-list").on("click",".br-zhu-del",function(t){a(this).parents(".br-zhu");a(this).parents(".br-zhu-item").remove(),h.setSdTotal(),p.setHeMaiTotal()}),a("#j-sd-clean").on("click",function(t){a(this).parents(".br-zhu-r").siblings(".br-zhu-l").html(""),h.setSdTotal(),p.setHeMaiTotal()}),a("#j-brhd-group a").on("click",function(t){if(!a(this).hasClass("active")){a("#j-brhd-group .active").removeClass("active");var e=parseInt(a(this).attr("data-t"));return e?(a("#quick").addClass("hidden"),a("#senior").removeClass("hidden"),
y.box=a("#senior .box-left").eq(0)):(a("#senior").addClass("hidden"),a("#quick").removeClass("hidden"),y.box=a("#quick .box-left")),void a(this).addClass("active")}}),a("#j-nav-tabs").on("click","a",function(t){var e=a(this).parents("li").index();y.box=a("#senior .box-left").eq(e),y.playType=a(this).attr("data-playtype")}),a(".br-set-group").on("click",".br-set",function(t){t.preventDefault(),a(this).siblings(".active").removeClass("active"),a(this).addClass("active")}),a(".tab-cut").on("mouseover","li",function(t){t.preventDefault(),a("#lr_tab li.on").removeClass("on"),a(this).addClass("on");var e=a("#lr_content .tab-con");e.hide(),e.eq(a(this).index()).show()}),a('.j-br-type a[data-toggle="tab"]').on("click",function(t){var e=a(this).parents("li"),i=y.box,n=i.find(".j-qi-box"),s=i.find(".j-he-box"),l=parseInt(e.attr("data-buytype"));switch(l){case 1:i.find(".j-bei-text").show(),n.addClass("hide"),s.addClass("hide");break;case 2:i.find(".j-bei-text .j-quick-bei").val(1),d.updateTotalZhu(a(this)),i.find(".j-bei-text").hide(),n.removeClass("hide"),s.addClass("hide");break;case 3:i.find(".j-share-num").val(i.find(".j-quick-total").html()),i.find(".j-bei-text").show(),s.removeClass("hide"),n.addClass("hide"),p.setHeMaiTotal()}a(this).parents(".j-br-type").find(".icon-y2").removeClass("icon-y2"),a(this).find(".icon").addClass("icon-y2")}),a("#qiuck-sub").on("click",function(t){var e=y.box,n={},s={},l="";s=d.getCommonParams(),s.qishu=e.find(".j-quick-qi").val(),l=1==s.qishu?"/lottery/digital/buy-self/"+s.lotyName+"/"+s.playName:"/lottery/digital/buy-track/"+s.lotyName+"/"+s.playName,n.isCheck=e.find(".j-sub-agreed")[0].checked,n.callback=function(){a.ajax({url:l,type:"post",dataType:"json",data:s}).done(function(a){return 1e5!==a.retCode?void i.handRetCode(a.retCode,a.retMsg):void d.onSubmitDone(a.retCode,a.retMsg,a.retData.projectNo,a.retData.trackId)}).fail(function(){d.onSubmitFail()})},n.confirmHtml={html:d.getAlertHtml(s)};var o=d.checkParamsStatus(s,n);return o?void r(n,s):!1}),d.getMoreAjaxParams=function(a){var t=y.box,e={};return 3===a&&(e.shareNum=Number(t.find(".j-share-num").val()),e.buyNum=Number(t.find(".j-rengou").val()),e.aegisNum=Number(t.find(".j-baodi-text").val()),e.extraPercent=t.find(".br-select").val(),e.title=t.find(".j-project-title").val(),e.textarea=t.find(".br-textarea").val(),e.set=t.find(".br-set-group .active").html()),e},a("#buy-submit").on("click",function(t){var e=y.box,n={},s={},l="",u="",h=(f.getZhuiJiaStatus(),""),c=["buy-self","buy-track","buy-together"];s=d.getCommonParams(),l=o(),h=d.getMoreAjaxParams(l,s.playName);for(var m in h)h.hasOwnProperty(m)&&(s[m]=h[m]);if(2===l){e.find(".is_end_zhongjiang")[0].checked&&(s.endminmoney=e.find(".end_min_money").val());for(var p=[],b=e.find(".br-details tbody .br-zhui-c:checked"),v=0;v<b.length;v++)p.push(b.eq(v).attr("data-qihaoid")+"|"+b.eq(v).attr("data-qi")+"|"+b.eq(v).parents("tr").find(".br-zhui-bei").val());s.zhuihaoqihao=p,s.qishu=p.length}u="/lottery/digital/"+c[l-1]+"/"+s.lotyName+"/"+s.playName,n.isCheck=e.find(".j-sub-agreed")[0].checked,n.callback=function(){return s.buyNum+s.aegisNum>s.shareNum?void i.showTips("ERROR：认购金额和保底金额超过购买金额！"):void a.ajax({url:u,type:"post",dataType:"json",data:s}).done(function(a){return 1e5!==a.retCode?void i.handRetCode(a.retCode,a.retMsg):void d.onSubmitDone(a.retCode,a.retMsg,a.retData.projectNo,a.retData.trackId)}).fail(function(){d.onSubmitFail()})},n.confirmHtml={html:d.getAlertHtml(s)};var b=d.checkParamsStatus(s,n);return b?void r(n,s):!1}),a("#j-tuodan-sub").on("click",function(t){var e=y.box,n={},s={},l="",u="",h=(f.getZhuiJiaStatus(),""),c=["buy-self","buy-track","buy-together"];s=d.getCommonParams(),s.codes=d.tuodanFormarFormSub(e.find(".br-zhu-item")),s.playName=2,l=o(),h=d.getMoreAjaxParams(l,s.playName);for(var m in h)h.hasOwnProperty(m)&&(s[m]=h[m]);if(2===l){e.find(".is_end_zhongjiang")[0].checked&&(s.endminmoney=e.find(".end_min_money").val());for(var p=[],b=e.find(".br-details tbody .br-zhui-c:checked"),v=0;v<b.length;v++)p.push(b.eq(v).attr("data-qihaoid")+"|"+b.eq(v).attr("data-qi")+"|"+b.eq(v).parents("tr").find(".br-zhui-bei").val());s.zhuihaoqihao=p,s.qishu=p.length}u="/lottery/digital/"+c[l-1]+"/"+s.lotyName+"/"+s.playName,n.isCheck=e.find(".j-sub-agreed")[0].checked,n.callback=function(){return s.buyNum+s.aegisNum>s.shareNum?void i.showTips("ERROR：认购金额和保底金额超过购买金额！"):void a.ajax({url:u,type:"post",dataType:"json",data:s}).done(function(a){return 1e5!==a.retCode?void i.handRetCode(a.retCode,a.retMsg):void d.onSubmitDone(a.retCode,a.retMsg,a.retData.projectNo,a.retData.trackId)}).fail(function(){d.onSubmitFail()})},n.confirmHtml={html:d.getAlertHtml(s)};var b=d.checkParamsStatus(s,n);return b?void r(n,s):!1}),a("#j-upload-sub").on("click",function(t){var e=y.box,n={},s={},l="",u="",h=(f.getZhuiJiaStatus(),""),c=["buy-self","buy-track","buy-together"];s=d.getCommonParams(),s.beishu=1;var l=o();h=d.getMoreAjaxParams(l,s.playName);for(var m in h)h.hasOwnProperty(m)&&(s[m]=h[m]);u="/lottery/digital/"+c[l-1]+"/"+s.lotyName+"/"+s.playName,n.isCheck=e.find(".j-sub-agreed")[0].checked,n.callback=function(){return s.buyNum+s.aegisNum>s.shareNum?void i.showTips("ERROR：认购金额和保底金额超过购买金额！"):void a.ajax({url:u,type:"post",dataType:"json",data:s}).done(function(a){return 1e5!==a.retCode?void i.handRetCode(a.retCode,a.retMsg):void d.onSubmitDone(a.retCode,a.retMsg,a.retData.projectNo,a.retData.trackId)}).fail(function(){d.onSubmitFail()})},n.confirmHtml={html:d.getAlertHtml(s)};var p=d.checkParamsStatus(s,n);return p?void r(n,s):!1}),a("#j-more-sub").on("click",function(t){var e=a(this).parents(".tab-pane"),n={},s={};s=d.getCommonParams(),s.zhushu=a("#j-more-zhu").val(),s.beishu=a("#j-more-bei").val(),s.qishu=a("#j-more-qi").val(),n.isCheck=e.find(".j-sub-agreed")[0].checked,n.callback=function(){a.ajax({url:"/lottery/digital/buy-rank/"+s.lotyName+"/"+s.playName,type:"post",dataType:"json",data:s}).done(function(a){return 1e5!==a.retCode?void i.handRetCode(a.retCode,a.retMsg):void d.onSubmitDone(a.retCode,a.retMsg,a.retData.projectNo,a.retData.trackId)}).fail(function(){d.onSubmitFail()})},n.confirmHtml={html:d.getAlertHtml(s)};var l=d.checkParamsStatus(s,n);return l?void r(n,s):!1}),a(".zh_issue_num").on("change",function(t){t.preventDefault(),p.getNewHtml(a(this))}),a(".br-details").on("click",".br-zhui-btn",function(t){p.getNewHtml(a(this))}),a(".br-details").on("click",".br-he-btn",function(a){p.setHeMaiTotal()}),p.bindHeMaiEvent()});