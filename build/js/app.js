var APP={};APP.isDecimal=function(a){return parseInt(a)==a?!1:!0},APP.bindInputPlace=function(){$(".j-input-place").on("focus",function(a){var t=$(this),o=t.attr("data-place");o==t.val()&&$(this).val("")}),$(".j-input-place").on("blur",function(a){var t=$(this),o=t.attr("data-place");""==t.val()&&$(this).val(o)})},APP.bindInputPlace(),APP.handRetCode=function(a,t,o){switch(a){case 120002:this.showLoginBox(o);break;case 120001:this.showTips({html:'<div class="tipbox"><p>'+t+',购买失败！</p><div class="m-one-btn"><a href="/account/top-up" class="btn btn-danger" target="_blank">立即充值</a></div></div>'});break;default:this.showTips({text:t})}},APP.updateUserMoney=function(){$.ajax({url:"/account/islogin",type:"get",dataType:"json"}).done(function(a){1e5===a.retCode&&$("#userMoney").html(a.retData.money)})},APP.updateHeadUserInfo=function(){var a="";$.ajax({url:"/account/islogin",type:"get",dataType:"json"}).done(function(t){1e5===t.retCode&&(a='<span>欢迎来到彩胜网&nbsp;!&nbsp;&nbsp;&nbsp;&nbsp;<i class="icon icon-bor"></i></span>'+t.retData.username+'       账户余额:<span id="userMoney">'+t.retData.money+'</span>元<a href="/account/top-up" class="active">充值</a><i class="icon icon-bor"></i><a href="/account/logout">退出</a><i class="icon icon-bor"></i><a href="/account/index" class="last">我的账户</a>',$("#j-hd-top").html(a))})},APP.showLoginBox=function(a){var t=null;if(!$("#user-login")[0]){var o='<div id="j-login-modal" class="modal fade bs-example-modal-sm login-modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><i class="icon icon-close"></i></button>登录</div><div class="modal-body"><div class="login-form"><label for="user">用户名：</label><input type="text" id="login-username"/><a href="/account/register">注册新用户</a></div><div class="login-form"><label for="pwd">登录密码：</label><input type="password" id="login-password"/><a href="/html/user/find_psw.html">找回密码</a></div><button class="btn btn-danger" id="user-login">立即登录</button></div></div></div></div>';$("body").append(o)}t=$("#j-login-modal"),t.on("show.bs.modal",APP.centerModal),t.modal("show"),$("#user-login").unbind(),$("#user-login").on("click",function(o){o.preventDefault();var e=APP.regStr($("#login-username").val()),n=APP.regStr($("#login-password").val());return e&&n?void $.ajax({url:"/account/userinfo/user/dologin",type:"post",dataType:"json",data:{username:e,password:n}}).done(function(o){return 1e5==o.retCode?(t.hide(),APP.updateHeadUserInfo(),void(a&&a())):void APP.showTips(o.retMsg)}).fail(function(){APP.showTips("Server has some error!")}):void APP.showTips("帐号密码不能为空")})},APP.regStr=function(a){for(var t=new RegExp("[%--`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——| {}【】‘；：”“'。，、？]"),o="",e=0;e<a.length;e++)o+=a.substr(e,1).replace(t,"");return o},APP.createShowTipsHTML=function(a){var t="",o=Number(a.type);if(""===a.html)switch(t='<div class="tipbox"><p>'+a.text+"</p></div>",o){case 1:t+='<div class="m-onebtn"><button class="btn modal-sure-btn" id="j-modal-confirm">确定</button></div>';break;case 2:t+='<div class="m-btns"><button class="btn btn-danger" id="j-modal-confirm">确定</button><button class="btn btn-gray ml15" data-dismiss="modal">取消</button></div>';break;default:t+='<div class="m-one-btn"><button class="btn" data-dismiss="modal">确定</button></div>'}else t=a.html;if(a.className||(a.className=null),$("#myModal")[0])a.className||$("#myModal").removeClass().addClass("friend-modal modal"),$(".j-apptips-title").html(a.title),$("#apptips-content").html(t);else{var e='<div class="friend-modal modal fade'+a.className+'" id="myModal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true"><div class="modal-dialog"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><i class="icon icon-close"></i></button><h4 class="modal-title j-apptips-title" id="myModalLabel">'+a.title+'</h4></div><div class="modal-body text-center fc-84" id="apptips-content">'+t+"</div></div></div>";$("body").append(e)}$("#j-modal-confirm").unbind("click"),a.onConfirm&&$("#j-modal-confirm").on("click",function(t){t.preventDefault(),a.onConfirm()}),a.callback&&a.callback()},APP.showTips=function(a){var t=APP,o={title:"友情提示",html:"",type:0,text:"",onConfirm:null,className:null,callback:null};if("object"==typeof a&&null!==a)for(var e in a)a.hasOwnProperty(e)&&""!=a[e]&&(o[e]=a[e]);else o.text=a;t.createShowTipsHTML(o),$("#myModal").on("show.bs.modal",t.centerModal),$("#myModal").modal("show")},APP.centerModal=function(){$(this).css("display","block");var a=$(this).find(".modal-dialog"),t=($(window).height()-a.height())/2,o=($(window).width()-a.width())/2;a.css({"margin-top":t,"margin-left":o})},$(".Modal").on("show.bs.modal",APP.centerModal),$(window).on("resize",function(){$(".modal:visible").each(APP.centerModal)}),APP.getUrlPara=function(a){var t=window.location.href,o="(?:\\?|&){1}"+a+"=([^&]*)",e=new RegExp(o,"gi");return e.exec(t),RegExp.$1},APP.onSubmitConfirm=function(a,t,o){$.ajax({url:"/account/islogin",type:"get",dataType:"json"}).done(function(e){1e5===e.retCode?Number(e.retData.money.replace(/,/g,""))>=t.byNum?(APP.showTips(o),$("#buyConfirm").on("click",function(o){a(t)})):APP.showTips({html:'<div class="tipbox"><p>您的余额不足,购买失败！</p><div class="m-one-btn"><a href="/account/top-up" class="btn btn-danger" target="_blank">立即充值</a></div></div>',title:"余额不足"}):APP.handRetCode(e.retCode,e.retMsg)})},APP.onServiceFail=function(){APP.showTips("服务器繁忙,请稍后再试!")},APP.initLrkf=function(){var a=["2726429522"],t='<div id="j-side" class="side"><a class="icon-text" target="_blank" href="http://wpa.qq.com/msgrd?v=3&amp;uin='+a[0]+'&amp;site=qq&amp;menu=yes" ></a></div>';$("body").append(t);var o=$("#j-side .icon-text");$("#j-side").hover(function(){o.animate({left:"-64px",opacity:"1"},200)},function(){o.animate({left:"-70px",opacity:"0"},200)})},APP.showStopSellModal=function(a){var t="";t+='<p>选择其它彩种投注 或 <a href="/">返回首页</a></p><ul>',t='<li><img class="logo" src="'+staticHostURI+'/front_images/lottery/dlt_home_logo.png" alt="大乐透"/><a href="/lottery/buy/dlt">大乐透</a></li>\r\n      <li class="text-right"><img class="logo" src="'+staticHostURI+'/front_images/lottery/qxc_home_logo.png" alt="七星彩"/><a href="/lottery/buy/qxc">七星彩</a></li>\r\n      <li><img class="logo" src="'+staticHostURI+'/front_images/lottery/pl3_home_logo.png" alt="排列3"/><a href="/lottery/buy/pl3">排列3</a></li>\r\n      <li class="text-right"><img class="logo" src="'+staticHostURI+'/front_images/lottery/pl5_home_logo.png" alt="排列5"/><a href="/lottery/buy/pl5">排列5</a></li>',t+="</ul></div>",t="";var o='<img src="'+staticHostURI+'/front_images/stopsell.png" class="stopsell-img" alt="mask-main" alt="暂停销售"/><div class="stopsell-box"><h4>'+a+" 暂停销售</h4>"+t,e='<div class="m-mask m-stopsell-mask" id="j-stopsell-mask"><div class="m-mask-bg"></div><div class="m-mask-main"><div class="modal-header"><button type="button" class="close" id="j-stopsellmask-close"><i class="icon icon-close"></i></button><h4 class="modal-title">暂停销售</h4></div><div class="stopsell-body">'+o+"</div></div></div>";$("body").append(e),$("#j-stopsell-mask").show(),$("#j-stopsellmask-close").on("click",function(a){$("#j-stopsell-mask").remove()})},APP.init=function(){var a={el:$("#choseCai"),init:function(a){var t=this;for(var o in a)a.hasOwnProperty(o)&&(t[o]=a[o]);t.bindEvent()},bindEvent:function(){var a=this;a.el.on("mouseout",function(t){a.el.removeClass("on"),a.el.find(".j-white-tri").removeClass("icon-hup").addClass("icon-hdown")}),a.el.mouseover(function(){a.el.addClass("on"),a.el.find(".j-white-tri").removeClass("icon-hdown").addClass("icon-hup")})}};a.init({el:$("#choseCai")});var t={el:$("#j-hemai-nav"),bindEvent:function(){var a=this;a.el.hover(function(){a.el.addClass("on")},function(){a.el.removeClass("on")})}};t.bindEvent();var o={bindEvent:function(a){var t=a;t.el.hover(function(){t.target.addClass("behover")},function(){t.target.removeClass("behover")})}};o.bindEvent({el:$(".j-num-li"),target:$(".j-num-nav")}),o.bindEvent({el:$(".j-heighp-li"),target:$(".j-heighp-nav")}),APP.initLrkf()},$(function(){APP.init();var a=window.location.href;a.indexOf("hall")>=0&&($(".hd-nav li a.active").removeClass("active"),$(".j-nav-hall").addClass("active")),a.indexOf("project-center")>=0&&($(".hd-nav li a.active").removeClass("active"),$(".j-nav-center").addClass("active")),$("#j-header-login-btn").on("click",function(a){a.preventDefault();var t=location.href.replace(location.origin,"");t=t.replace(/#/,""),location.href="/account/login?ret_url="+encodeURIComponent(t)})});