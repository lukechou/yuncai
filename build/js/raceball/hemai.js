define(["jquery"],function(t){"use strict";var e=function(){function e(t){return this instanceof e?void 0:new e(t)}return e.prototype={box:t("#ballModal")},e.prototype.updateHemai=function(t,e,i,n,a,o,r){var l=this,d=l.box;d.find(".j-share-num").val(t),d.find(".j-unit-price").html(e),d.find(".j-rengou").val(i),d.find(".br-select").val(n),d.find(".j-rengou-percentage").html(a),d.find(".j-baodi-text").val(r),d.find(".j-baodi-percent").html(o),d.find(".j-rengou-tip").html(i*e),d.find(".j-baidi-tip").html(r*e),d.find(".j-totalm-tip").html((i+r)*e)},e.prototype.setHeMaiTotal=function(){var t=this,e=t.box,i=1*e.find("#j-total-money").html(),n=e.find(".j-share-num").val(),a="",o="",r=e.find(".j-rengou").val(),l="",d=1*e.find(".br-select").val()||0,u="",c="",f=parseInt(e.find(".j-baodi-text").val())||0,p=!0,s=e.find("#j-full-bao")[0].checked;return s?e.find(".j-baodi-text").attr("readonly",!0):e.find(".j-baodi-text").removeAttr("readonly"),n=Number(n.replace(/[^0-9]/g,"")),r=Number(r.replace(/[^0-9]/g,"")),0===i?void ZHUI.updateHemai(0,d,0,0,0):(i%n===0?a=i/n:(a=2,n=i/2),0>=r&&(r=1),r>n&&(r=n),.05>r/n&&(r=Math.ceil(.05*n)),d>r/n*100&&(r=Math.ceil(n*d*.01)),o=r*a,e.find(".j-baodi-check")[0]&&(p=e.find(".j-baodi-check")[0].checked),p?(e.find(".j-baodi-text")[0].disabled=!1,u=n>f+r?f:n-r,s&&(u=n-r),c=(u/n*100).toFixed(2)):(e.find(".j-baodi-text")[0].disabled=!0,u=0,c="0.00"),l=0===i?0:(r/n*100).toFixed(2),void t.updateHemai(n,a,r,d,l,c,u))},e.prototype.inputOnfocus=function(e){t.trim(e.val())==e.attr("data-text")&&(e.parents("p").find(".j-btext-total").html(0),e.val(""))},e.prototype.inputOnblur=function(e){var i=e.attr("data-text");""==t.trim(e.val())&&(e.val(i),e.parents("p").find(".j-btext-total").html(i.length))},e.prototype.reSetStrsize=function(t){var e=t.val().length,i=parseInt(t.attr("data-size"));i>=e?t.parents("p").find(".j-btext-total").html(e):(t.val(t.val().slice(0,i-1)),t.parents("p").find(".j-btext-total").html(i))},e.prototype.init=function(){var e=this;t(".j-rengou,.br-select,#j-full-bao,.j-baodi-text,.j-share-num").on("change",function(t){e.setHeMaiTotal()}),t(".br-textarea,.j-project-title").on("focus",function(i){e.inputOnfocus(t(this))}),t(".br-textarea,.j-project-title").on("blur",function(i){e.inputOnblur(t(this))}),t(".br-textarea,.j-project-title").on("keyup",function(i){e.reSetStrsize(t(this))}),t(".br-set-group").on("click",".br-set",function(e){t(this).siblings(".active").removeClass("active"),t(this).addClass("active")})},e}(),i=new e;return i.init(),i});