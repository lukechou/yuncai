require.config({paths:{jquery:"../lib/jquery",bootstrap:"../lib/bootstrap.min",app:"../common/app",inp:"../account/inp"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"},inp:{deps:["jquery"],exports:"inp"}}}),require(["jquery","app","inp","bootstrap"],function(a,r,n){function i(n){n&&a.ajax({url:"/account/bind_bank/ajax",type:"get",dataType:"json",data:{bankName:n.bank,bankAccount:n.card,password:n.pwd}}).done(function(i){1e5==i.retCode?(a("#j-bindBank").html(n.bank),a("#j-bindCard").html(n.card),a("#bind-form").hide(),a("#bindbak-suc").fadeIn(),a(".bindcard-tips").toggle()):r.handRetCode(i.retCode,i.retMsg)}).fail(function(){r.showTips("服务器繁忙请稍后再试！")})}n.init({parentClass:".form-group"}),a("#j-yinhang").on("change",function(){var r=a(this).val();0!=r&&a(this).parents(".form-group").find(".j-tips-e").addClass("hide")}),a("#j-bind-sub").on("click",function(r){r.preventDefault();var t={},d=a.trim(a("#j-yinhang").val())||"",e=a.trim(a("#j-card").val())||"",s=a.trim(a("#j-confirm-card").val())||"",o=a.trim(a("#j-pwd").val())||"";t.bank=d,t.card=e,t.pwd=o;var p={card:!0,confirmCard:!0,pwd:!0,bank:!0},c={card:"j-card",confirmCard:"j-confirm-card",pwd:"j-pwd",bank:"j-yinhang"};n.regGroup.bank.test(e)||(p.card=!1),e!=s&&(p.confirmCard=!1),n.regGroup.pwd.test(o)||(p.pwd=!1),0==d&&(p.bank=!1),n.checkInp(p,c)&&i(t)}),a("#j-card,#j-confirm-card").on("keyup",function(r){r.preventDefault();var n=a(this),i=a.trim(n.val()),t=n.siblings(".j-card-tips");""===i?t.html(i).hide():t.html(i).show()}),a("#j-card,#j-confirm-card").on("blur",function(r){var n=a(this),i=n.siblings(".j-card-tips");i.hide()}),a("#j-confirm-card").on("blur keyup",function(r){r.preventDefault();var n=a(this),i=a.trim(n.val()),t=(n.siblings(".j-card-tips"),n.parents(".form-group"));t.find(".j-tips-s,.j-tips-e,.j-tips-w").addClass("hide"),a("#j-card").val()===i?t.find(".j-tips-s").removeClass("hide"):t.find(".j-tips-e").removeClass("hide"),""==i&&a("#j-confirm-card").parents(".form-group").find(".j-tips-s,.j-tips-e,.j-tips-w").addClass("hide")})});