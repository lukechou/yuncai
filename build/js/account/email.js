require.config({paths:{jquery:"../lib/jquery",bootstrap:"../lib/bootstrap.min",app:"../common/app",inp:"../account/inp"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"},inp:{deps:["jquery"],exports:"inp"}}}),require(["jquery","app","inp","bootstrap"],function(a,e,t){function n(t){var n=a("#email").val(),r=a("#password").val(),l=t?1:0;a("#j-send-again").addClass("active"),a.ajax({url:"/account/bind_mail/mail/ajax",type:"get",dataType:"json",data:{email:n,password:r,force:l}}).done(function(t){1e5===t.retCode?(a("#j-safeemail-1").hide(),a("#j-safeemail-2").fadeIn(),o=+new Date+12e4,i=setInterval(function(){var e=a.now(),t=((o-e)/1e3).toFixed(0);t>0?a("#j-send-again").html(t+"秒后可再次发送"):(clearInterval(i),a("#j-send-again").html("重新发送").removeClass("active"))},1e3),a("#email_temp").html(n),a("#email_login").attr("href",t.retData.mailHost)):e.handRetCode(t.retCode,t.retMsg)})}t.init(),a("#j-send").on("click",function(){var e=a("#email").val()||"",i=a("#password").val()||"",o={m1:!0,m2:!0},r={m1:"email",m2:"password"};t.regGroup.email.test(e)||(o.m1=!1),t.regGroup.pwd.test(i)||(o.m2=!1),t.checkInp(o,r)&&n(!1)}),a("#j-send-again").on("click",function(){a(this).hasClass("active")||n(!0)});var i=null,o=0;a("#j-send-2").on("click",function(){var t=a("#email").val(),n=a("#checknum").val();a.ajax({url:"/account/bind_mail/ajax",type:"get",dataType:"json",data:{email:t,captcha:n}}).done(function(n){1e5==n.retCode?(a("#j-safeemail-2").hide(),a("#j-safeemail-3").fadeIn(),a("#bindMail").html(t)):e.handRetCode(n.retCode,n.retMsg)})})});