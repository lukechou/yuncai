$(function(){function e(e){t.bank=e.attr("class"),t.type=e.attr("data-type"),$("#j-type-tips").find(".bank").removeClass().addClass(t.bank),$("#j-type-tips").show(),$("#j-sure-bank").removeClass().addClass(t.bank)}function s(){return t.money=1*$("#js-sum").val(),isNaN(t.money)}function a(){if($("input[name=type]:checked").val()&&!s()){var e=Number($("#js-sum").val());1e6>=e&&e>=.01&&$("#j-sub-bank").addClass("selected")}}var t=function(){"use strict";var e={money:"",bank:"",type:"",setTipsTable:function(){$("#j-cz-sureft .item").hide(),$("#j-cz-sureft .item"+this.type).show()}};return e}();$("#j-sub-bank").on("click",function(){if($(this).hasClass("selected")){var e=$("input[name=type]:checked").val();s()?$("#js-sum-e").removeClass("hide"):e?$.ajax({url:"/account/pre_top_up",type:"post",dataType:"json",data:{money:t.money,type:e}}).done(function(e){1e5!=e.retCode?APP.showTips(e.retMsg):($(".recharge").hide(),$("#j-money-sum").html(t.money),$(".cz-sure").fadeIn(),t.setTipsTable(),$(".cz-surehd-ft").html(e.retData.topUpFormHtml))}).fail(function(){APP.onServiceFail()}):$(".js-type-e").removeClass("hide")}}),$("#js-sum").on("change",function(){s()?($("#j-sum-tips").html("请输入整数的金额"),$("#js-sum-e").removeClass("hide"),$("#js-sum-suc").addClass("hide")):(t.money=t.money.toFixed(2),$("#js-sum").val(t.money),t.money<.01?($("#j-sum-tips").html("充值金额不能小于0.01元"),$("#js-sum-e").removeClass("hide"),$("#js-sum-suc").addClass("hide")):t.money>1e6?($("#j-sum-tips").html("输入的金额不能大于一百万"),$("#js-sum-e").removeClass("hide"),$("#js-sum-suc").addClass("hide")):($("#js-sum-suc").removeClass("hide"),$("#js-sum-e").addClass("hide"),a()))}),$("#bank-area .bank").on("click",function(){e($(this)),$(".bank-selected").removeClass("bank-selected"),$(this).addClass("bank-selected"),$(this).find("input")[0].checked=!0,a()}),$("#j-sure-back").on("click",function(){$(".recharge").fadeIn(),$(".cz-sure").hide()})});