require.config({paths:{jquery:"../lib/jquery",bootstrap:"../lib/bootstrap.min",app:"../common/app",PAGE:"pager"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"},PAGE:{deps:["jquery"],exports:"jquery"}}}),require(["jquery","app","PAGE","bootstrap"],function(t,o){"use strict";PAGE.loadTrackList=function(o){PAGE.ajaxUrl="/account/track/ajax",PAGE.pageElement=t(".j-page-box"),PAGE.initAjax(o),PAGE.pageTable=t("#track_detail_list"),PAGE.onSuccess=function(t){var o="",a="",e="",i="";if(1e5==t.retCode){if(t.retData.data.length>0){a=t.retData.data;for(var n=1;n<=a.length;n++)i=a[n-1],1==i.show?(e='<a href="'+i.detailURI+'">查看详细</a><a href="'+i.buyURI+'" class="ml8">继续投注</a>',1==i.showCancelLink&&(e+='<a href="javascript:void(0)" data-uri="'+i.cancelURI+'" class="ml8 j-cancel-track">取消追号</a>')):e="",o+="<tr><td>"+i.lotyCNName+"</td><td>"+i.price+"</td><td>"+i.lessIssueNum+"</td><td>"+i.finishIssueNum+"</td><td>"+i.status+"</td><td>"+e+"</td></tr>"}else o='<tr><td colspan="7">无相关追号纪录</td></tr>';PAGE.config.pageNum=t.retData.pageSize,PAGE.makePageHtml(),PAGE.bindPageEvent(PAGE.loadTrackList)}else o='<tr><td colspan="7">'+t.retMsg+"</td></tr>";this.appendTable(o)}};var a=function(){var o={page:1,pageSize:10,init:function(){this.makeLotyChoose("1"),PAGE.loadTrackList({days:30,lotyType:1,lotyName:"",page:o.page,pageSize:o.pageSize})},makeLotyChoose:function(o){switch(o){case"1":t("#j-all").html('<option value="">全部</option><option value="ssq">双色球</option><option value="dlt">大乐透</option><option value="pl5">排列5</option><option value="pl3">排列3</option><option value="qxc">七星彩</option><option value="qlc">七乐彩</option><option value="fc3d">福彩3D</option>');break;case"2":t("#j-all").html('<option value="">全部</option><option value="gdx">粤11选5</option><option value="dlc">赣11选5</option><option value="syy">十一运夺金</option><option value="xjx">新疆11选5</option><option value="k3">江苏快3</option><option value="jk3">吉林快3</option><option value="hbk3">湖北快3</option><option value="jxssc">江西时时彩</option><option value="gkl">广东快乐十分</option><option value="klpk">快乐扑克3</option>')}}};return o}();a.init(),t("#j-seeds").on("change",function(o){a.makeLotyChoose(t(this).val())}),t("#search").on("click",function(o){PAGE.loadTrackList({days:t("#j-nearday").val(),lotyType:t("#j-seeds").val(),lotyName:t("#j-all").val(),page:a.page,pageSize:a.pageSize})}),t("#track_detail_list").on("click",".j-cancel-track",function(){var a='<div class="tipbox"><p>已经购买及已出票的期次会继续等待开奖、结算。</p><p>未购买的期次将会直接取消。</p><p>您是否确认取消追号？</p></div><div class="m-btns"><button class="btn btn-danger" id="j-modal-confirm">确认取消</button><button class="btn btn-gray ml15" data-dismiss="modal">继续追号</button></div>',e=t(this).attr("data-uri");o.showTips({html:a,onConfirm:function(){t.ajax({url:e,type:"get",dataType:"json"}).done(function(t){o.showTips(1e5==t.retCode?{text:"取消追号成功",type:1,onConfirm:function(){window.location.reload()}}:{text:t.retMsg,type:1,onConfirm:function(){window.location.reload()}})}).fail(function(){o.onServiceFail()})}})})});