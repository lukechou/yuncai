require.config({paths:{jquery:"../lib/jquery",bootstrap:"../lib/bootstrap.min",app:"../common/app",inp:"../account/inp"},shim:{bootstrap:{deps:["jquery"],exports:"jquery"},inp:{deps:["jquery"],exports:"inp"}}}),require(["jquery","app","inp","bootstrap"],function(e,t,n){n.init();var s=function(){"use strict";var s={reStartTime:null,timeOutEvent:null,init:function(){var a=this;e("#j-infosave").on("click",function(){var s=e("#usermobile").val(),a=e("#userpwd").val(),i={m1:!0,m2:!0},o={m1:"usermobile",m2:"userpwd"};n.regGroup.mobile.test(s)||(i.m1=!1),n.regGroup.pwd.test(a)||(i.m2=!1),n.checkInp(i,o)&&e.ajax({url:"/account/bind_mobile/ajax",type:"get",dataType:"json",data:{mobile:s,captcha:e("#checknum").val(),password:a}}).done(function(n){1e5==n.retCode?(e("#bindMobile").html(s),e("#j-info-text").hide(),e("#bindcard-suc").fadeIn()):t.handRetCode(n.retCode,n.retMsg)})}),e("#send_captcha_sms").on("click",function(i){i.preventDefault();var o=e("#usermobile").val();return n.regGroup.mobile.test(o)?(a.smsControl=!0,void(a.smsControl&&e.ajax({url:"/account/bind_mobile/sms/ajax",type:"get",dataType:"json",data:{mobile:e("#usermobile").val()}}).done(function(n){1e5==n.retCode?(e("#j-sms-tips").removeClass("hide"),s.initSmsEvent()):t.handRetCode(n.retCode,n.retMsg)}))):(e("#usermobile").parents(".info-list").find(".j-tips-e").removeClass("hide"),void(a.smsControl=!1))})},smsControl:!0,updateSmsBtn:function(t){e("#send_captcha_sms").html(t)},updateSmSEvent:function(t){var n=this;t?(n.smsControl=0,e("#send_captcha_sms").addClass("active")):(n.smsControl=1,e("#send_captcha_sms").removeClass("active"))},initSmsEvent:function(){var t=this,n=120;t.reStartTime=+new Date+12e4,t.updateSmsBtn(n+"秒后可重新发送"),t.updateSmSEvent(!0),t.timeOutEvent=setInterval(function(){var n="",s=+new Date,a=((t.reStartTime-s)/1e3).toFixed(0);a>0?(n=a,n+="秒后可重新发送",t.updateSmsBtn(n)):(e("#j-sms-tips").addClass("hide"),t.updateSmsBtn("重新发送"),t.updateSmSEvent(!1),clearInterval(t.timeOutEvent))},1e3)}};return s}();s.init()});